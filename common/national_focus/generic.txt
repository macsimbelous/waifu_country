search_filter_prios = {
	FOCUS_FILTER_POLITICAL = 1010
	
	FOCUS_FILTER_RESEARCH = 522
	
	FOCUS_FILTER_INDUSTRY = 509
### There is no documentation on how this is used? From vanilla generic focus file.
 ## Other filters used by this mod:
 # FOCUS_FILTER_STABILITY
 # FOCUS_FILTER_WAR_SUPPORT
 # FOCUS_FILTER_MANPOWER
 # FOCUS_FILTER_FRA_POLITICAL_VIOLENCE
 # FOCUS_FILTER_ANNEXATION
 #
}

#########################
# ai_will_do standards
# 	- Since "factor" is arbitrary based on sum of "factors" from all available foci, 
# 	please refer to this table to determine order of magnitude to balance AI decision weights.
#
# => Tier 1 Focus are Branch-opening Foci with no pre-requisites. (typically 70 days unlock)
# => Tier 2 means at least one focus must be finished before unlocking this one. (typically 140 days earliest)
# => Tier 3 requires 2 before it (210 days), Tier 4 requires 3 before it (280 days), and so on. 
# => The maximum tier is Tier 8, Iron Curtain/Freeflow Ideas/Tech Sharing. 
# => Typical Capstone tier however is Tier 5-6, so those would be proportinately weighted higher. but 7-8 won't need to be. 
# => Rely on modifiers to further weight higher tiers.
#
# Baseline Factors..
# => Tier 1: 20		(Not 1 because you can't modify down. Not 100 because too much weight vs Tier 2)
# => Tier 2: 200	(10x as likely as to select a tier 1, enforces going down the chain.)
# => Tier 3: 800	(4x as likely compared to tier 2)
# => Tier 4: 1600
# => Tier 5: 3200
# => Tier 6: 4800
# => Tier 7: 5000
# => Tier 8: 5000
#
# Special / Secondary foci branches such as Women's rights will have a base of 10, rarely be selected by default
# unless triggered by modifiers where it actually is helpful for the AI.
#
# Multiply to 10k for immediate strategic priority. Careful not to overflow with crazy modifiers.
# In practice you shouldn't need modifiers to go beyond 4x because followign this table should enforce relative linearity
# which would minimize number of competing branches. (Highest weighted competitor is the one you just completed)
#
#
# AI focus priority design scheme:
# 
# If at war, go down Nationalism path for manpower/reinforcements.
#
#If threatened/Threatening Neighbor: (incl If high risk target like Norway/Denmark/Sweden/Finland)
# Basic Military production if at war
# Early army tech
# Defense priorization if threatened
# Medium Military Production
#
#If not threatened
#
# Get factories above 10
# Get Unified National Infrastructure
# Army /Equipment Effort
# Citizen Service policies
#
# AI Check points / Flags
#
# => DefCon1 -> Military Youth, Ideological Fanaticism
# => mil_fact -> Nationalize industries (This should only follow immediately after DefCon1; shortest path to military production and very historically plausible)
# => WarPrep -> Citizen Readiness, EQ Effort II
#
# => Production -> Unified Infrastructure
# => Defense -> Immediate = Deterrence, Late = Defense Rollout
#
# AI_plan_DefCon1		-> AI_plan_mil_prod		->AI_plan_WarPrep		->AI_plan_infrastructure	
#
# AI_plan_Defense_Fast							
# 		-> AI_plan_Defense_Full		->AI_plan_WarPrep		->AI_plan_infrastructure		
#
# AI_plan_infrastructure							
#							
# 		AI_plan_new_navy			Set this flag upon completing Naval Effort		
# 		If controlling non-owned coastal provinces, max priority to Navy branch (it means AI is a successful conquerer)					
#
# Evaluate if the AI should be following a strategic plan during Completion reward.
# In subsequent Focuses, use 0.5 modifier to tune down focuses that aren't conducive to the active strategy.
# Remember to clear flags upon reaching every strategic focus check point.
#
#
#


focus_tree = {
	id = generic_focus
	
	country = {
		factor = 1
	}
	continuous_focus_position = { x = 50 y = 1400 } #Based ON USA's tree, default x50 y1600
	default = yes
	reset_on_civilwar = no

	initial_show_position = {
		focus = political_effort
	}


### Political Branch
	focus = {
		id = political_effort
		icon = GFX_focus_hol_the_foundations_of_defense #GFX_goal_generic_demand_territory
		x = 1
		y = 0
		cost = 5
	
		search_filters = { FOCUS_FILTER_POLITICAL }
	
		available_if_capitulated = yes

		ai_will_do = {
			factor = 20	#Tier 1

			modifier = {
				factor = 20
				AND = {
					NOT = { has_completed_focus = industrial_effort } # We're still in the strategy prioritization stage
					OR = {
						has_war = yes	# DEFCON1
						tag = AUS		# DEFCON1
						tag = ALB		# DEFCON1
						tag = SWE		# DEFENSE
						tag = NOR		# DEFENSE
						any_neighbor_country = {
							OR = {
								tag = GER
								tag = SOV
								tag = ITA
							}
						}	# Deterrence!
					}
				}
			}

			modifier = {
				factor = 200
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_Defense_Fast					
				}
			}

			modifier = {
				factor = 2
				has_stability < 0.4	#Rush Centralization
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					#has_country_flag = AI_plan_DefCon1
					#has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					#has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_political_power = 120

			### Configuring AI strategy
			if = {
				limit = { 
					OR = {
						has_war = yes
						tag = AUS
						tag = ALB
					}
					NOT = { has_country_flag = AI_plan_DefCon1_finished }
				}
				set_country_flag = AI_plan_DefCon1
			}
			else_if {
				limit = {
					is_in_faction_with = SOV
					NOT = { has_country_flag = AI_plan_Defense_Full_finished }
				}	# To exclude TAN & MON from the next bloc
				set_country_flag = AI_plan_Defense_Full
			}
			else_if = {
				limit = {
					OR = {
						tag = SWE #Threatned by Sea
						tag = NOR #Threatned by Sea
						any_neighbor_country = {
							OR = {
								tag = GER
								tag = SOV
								tag = ITA
							}
						}	# Deterrence!
					}
					NOT = { has_country_flag = AI_plan_Defense_Fast_finished }
				}
				set_country_flag = AI_plan_Defense_Fast
			}
			else_if = {
				limit = {
					num_of_factories < 12
					NOT = { has_country_flag = AI_plan_infrastructure_finished }
				}
				set_country_flag = AI_plan_infrastructure
			}
		} #End Rewards Bloc
	}

	focus = {
		id = collectivist_ethos
		icon = GFX_goal_generic_national_unity #GFX_goal_tripartite_pact #
		prerequisite = { focus = political_effort }
		mutually_exclusive = { focus = liberty_ethos}
		available = {
			# OR = {
			# 	has_government = fascism
			# 	has_government = communism
			# 	has_government = neutrality
			# }
			# These should have been an AI factor decision, not a player restriction. 
			# If they want to risk civil war/stability issues, let them.
			#
			democratic < 0.75
		}
		x = -10
		y = 1
		relative_position_id = political_effort
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL   }

		available_if_capitulated = yes


		ai_will_do = {
			factor = 200	#Tier 2
			# modifier = {

			# 	factor = 0
			# 	# OR = {
			# 	# 	AND = {
			# 	# 		is_historical_focus_on = yes
			# 	# 		has_government = neutrality
			# 	# 	}
			# 	# }
			# 	if = {
			# 		limit = { is_historical_focus_on = yes }
			# 		has_idea = neutrality_idea
			# 	}
			# }
			# Either neutrality idea or historical focus is being hard coded to check as true here.
			# For some reason Ethiopia and Austria are checking this block as true, even though "has_government = neutrality" 
			# was already commented out, forcing a 0 factor.
			#

			modifier = {
				factor = 2
				has_war = yes		# DEFCON1
			}

			modifier = {
				factor = 20
				has_country_flag = AI_plan_DefCon1
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					#has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}

			modifier = {
				factor = 1.5
				OR = {
					fascim > 0.49
					communism > 0.49
				}
			}

			modifier = {
				factor = 1.5
				has_manpower < 100000
			}

		}

		completion_reward = {
			if = {
				limit = { has_global_flag = Disable_Fluid_Ideologies }
					add_timed_idea = { idea = collectivist_ethos_focus days = 1095 }
			} # End Fluid Ideology Option OFF Bloc
			else = {
				custom_effect_tooltip = fluid_c_f_tt
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc
		}
	}

	focus = {
		id = nationalism_focus
		icon = GFX_goal_support_fascism #icon = GFX_goal_tripartite_pact
		prerequisite = { focus = collectivist_ethos }
		mutually_exclusive = { focus = internationalism_focus }
		available = {
			OR = {
				has_government = fascism
				has_government = neutrality
				custom_trigger_tooltip = {
					tooltip = fascist_influence_trigger_tt
					OR = {
						has_idea = fascist_influence
						has_idea = fluid_fascism_1
						has_idea = fluid_fascism_2
						has_idea = fluid_fascism_3
						has_idea = fluid_fascism_4
						has_idea_with_trait = fascist_demagogue
					}
				}
				fascim > 0.30
			}
		}
		x = -1
		y = 1
		relative_position_id = collectivist_ethos
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL  }

		available_if_capitulated = yes


		ai_will_do = {
			factor = 800	#Tier 3
			modifier = {
				factor = 2
				any_neighbor_country = {
					is_major = yes
					has_government = fascism
				}
			}
			# modifier = {
			# 	factor = 0
			# 	AND = {
			# 		is_historical_focus_on = yes
			# 		NOT = { has_government = fascism }
			# 	}
			# }
			modifier = {
				factor = 2
				has_war = yes		# DEFCON1
			}

			modifier = {
				factor = 5
				has_country_flag = AI_plan_DefCon1
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					#has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}

			modifier = {
				factor = 1.2
				fascim > 0.29
			}

			modifier = {
				factor = 1.2
				has_manpower < 100000
			}
		}

		completion_reward = {
			if = {
				limit = { has_global_flag = Disable_Fluid_Ideologies }
				add_timed_idea = {
					idea = nationalism
					days = 720
				}
			} # End Fluid Ideology Option OFF Bloc
			else = {
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_f_tt
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				add_political_power = 150
			} # End Fluid Ideology Option ON Bloc
		}
	}
	
	focus = {
		id = internationalism_focus
		icon = GFX_goal_support_communism #icon = GFX_goal_tripartite_pact
		prerequisite = { focus = collectivist_ethos }
		mutually_exclusive = { focus = nationalism_focus }
		available = {
			if = {
				limit = { original_tag = CHI }
				has_government = communism
				else = {
					OR = {
						has_government = communism
						has_government = neutrality
						custom_trigger_tooltip = {
							tooltip = communist_influence_trigger_tt	
							OR = {
								has_idea = communist_influence
								has_idea = fluid_communism_1
								has_idea = fluid_communism_2
								has_idea = fluid_communism_3
								has_idea = fluid_communism_4
								has_idea_with_trait = communist_revolutionary
							}
						}
						communism > 0.30
					}
				}
			}
		}
		x = 1
		y = 1
		relative_position_id = collectivist_ethos
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL  }

		available_if_capitulated = yes


		ai_will_do = {
			factor = 800	#Tier 3
			modifier = {
				factor = 2
				any_neighbor_country = {
					is_major = yes
					has_government = communism
				}
			}			
			# modifier = {
			# 	factor = 0
			# 	AND = {
			# 		is_historical_focus_on = yes
			# 		NOT = { has_government = communism }
			# 	}
			# }

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					#has_country_flag = AI_plan_DefCon1		# Disabled this as an alternative path for communist countries on DefCon1.
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}

			modifier = {
				factor = 1.3
				communism > 0.29
			}
		}

		completion_reward = {
			if = {
				limit = { has_global_flag = Disable_Fluid_Ideologies }
				add_timed_idea = {
					idea = internationalism
					days = 720
				}
			} # End Fluid Ideology Option OFF Bloc
			else = {
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_c_tt
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
				add_political_power = 150
			} # End Fluid Ideology Option ON Bloc
		}
	}	

	focus = {
		id = liberty_ethos
		icon = GFX_goal_support_democracy
		prerequisite = { focus = political_effort }
		mutually_exclusive = { focus = collectivist_ethos }
		available = {
			# OR = {
			# 	has_government = democratic
			# 	has_government = neutrality
			# }
			# These should have been an AI factor decision, not a player restriction. 
			# If they want to risk civil war/stability issues, let them.
			#
			communism < 0.75
			fascism < 0.75
		}
		x = -2
		y = 1
		relative_position_id = political_effort
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes


		ai_will_do = {
			factor = 200	#Tier 2

# Vanilla Code. Is this breaking AI_plan triggers?
			# modifier = {
			# 	factor = 0.1
			# 	any_neighbor_country = {
			# 		is_major = yes
			# 		OR = {
			# 			has_government = communism
			# 			has_government = fascism
			# 		}
			# 	}
			# 	NOT = {
			# 		any_neighbor_country = {
			# 			is_major = yes
			# 			has_government = democratic
			# 		}
			# 	}
			# }

			modifier = {
				factor = 2
				OR = {
					tag = SWE
					tag = NOR
					any_neighbor_country = {
						OR = {
							tag = GER
							tag = SOV
							tag = ITA
						}
					}	# Deterrence!
				}
			}

			modifier = {
				factor = 20
				OR = {
					has_country_flag = AI_plan_Defense_Fast
				}
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					#has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}

			modifier = {
				factor = 1.5
				OR = {
					democratic > 0.49
					neutrality > 0.49
				}
			}
		}

		completion_reward = {
			add_ideas = liberty_ethos_focus

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_d_n_tt
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc

				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc				

			} # End Fluid Ideology Option ON Bloc
		}
	}

	focus = {
		id = militarism
		icon = GFX_focus_generic_manpower
		prerequisite = { focus = nationalism_focus }
		x = 0
		y = 1
		relative_position_id = nationalism_focus
		cost = 10
	
		search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_FRA_POLITICAL_VIOLENCE }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 2
				has_war = yes		# DEFCON1
			}

			modifier = {
				factor = 2
				has_country_flag = AI_plan_DefCon1
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					#has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}

			modifier = {
				factor = 1.5
				has_manpower < 100000
			}
		}

		completion_reward = {
			if = {
				limit = { has_idea = neutrality_idea }
				remove_ideas = neutrality_idea
			}			
			add_ideas = militarism_focus
			army_experience = 20
			set_rule = { can_send_volunteers = yes }

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_f_tt
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

	focus = {
		id = political_correctness
		icon = GFX_goal_generic_major_alliance
		prerequisite = { focus = internationalism_focus }
		x = 0
		y = 1
		relative_position_id = internationalism_focus
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL  }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					#has_country_flag = AI_plan_DefCon1		# Disabled this as an alternative path for communist countries on DefCon1.
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			if = {
				limit = { has_idea = neutrality_idea }
				remove_ideas = neutrality_idea
			}		
			add_ideas = idea_political_correctness

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_c_tt
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc
			add_political_power = 200
		}
	}

	focus = {
		id = neutrality_focus
		icon = GFX_goal_generic_neutrality_focus
		prerequisite = { focus = liberty_ethos }
		mutually_exclusive = { focus = interventionism_focus }
		x = -1
		y = 1
		relative_position_id = liberty_ethos
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 800	#Tier 3

			modifier = {
				factor = 0
			#	if = {
			#		limit = { is_historical_focus_on = yes }
					tag = AUS
			#	}
			# There is some weird hard-coded garbage going on with "is_historical_focus_on = yes" such that
			# any block with factor = 0 even without historical focus setting is forcing the block to check true.
			}

			modifier = {
				factor = 2
				OR = {
					tag = SWE
					tag = NOR
					any_neighbor_country = {
						OR = {
							tag = GER
							tag = SOV
							tag = ITA
						}
					}	# Deterrence!
				}
			}

			modifier = {
				factor = 5
				OR = {
					has_country_flag = AI_plan_Defense_Fast
				}
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					#has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}

			modifier = {
				factor = 1.5
				OR = {
					neutrality > 0.49
					has_idea = neutrality_idea
				}
			}
		}

		completion_reward = {
			if = {
				limit = { NOT = { has_idea = neutrality_idea } }
				add_ideas = neutrality_idea
			}

			# Start Fluid Ideology Option OFF Bloc
			if = {
				limit = { has_global_flag = Disable_Fluid_Ideologies }
				add_timed_idea = {
					idea = neutralism
					days = 720
				}
			} # End Fluid Ideology Option OFF Bloc
			# Start Fluid Ideology Option ON Bloc
			else = {
				custom_effect_tooltip = linebreak
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_n_tt
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc
			add_political_power = 150
		}
	}

	focus = {
		id = interventionism_focus
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = liberty_ethos }
		mutually_exclusive = { focus = neutrality_focus }
		x = 1
		y = 1
		relative_position_id = liberty_ethos
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 800	#Tier 3
			# modifier = {
			# 	factor = 0
			# 	if = {
			# 		limit = { is_historical_focus_on = yes }
			# 		has_idea = neutrality_idea
			# 	}
			# }

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}

			modifier = {
				factor = 1.5
				democratic > 0.39
			}
		}

		completion_reward = {
			if = {
				limit = { has_idea = neutrality_idea }
				remove_ideas = neutrality_idea
			}	
			set_rule = { can_send_volunteers = yes }

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_d_tt
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc
			add_political_power = 150
		}
	}

	focus = {
		id = military_youth
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = militarism }
		x = 0
		y = 1
		relative_position_id = militarism
		cost = 10
	
		search_filters = { FOCUS_FILTER_MANPOWER }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 3200	#Tier 5

			modifier = {
				factor = 2
				has_war = yes		# DEFCON1
			}

			modifier = {
				factor = 1.5
				has_country_flag = AI_plan_DefCon1
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					#has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}

			modifier = {
				factor = 1.5
				has_manpower < 100000
			}
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = militarism_focus
				add_idea = military_youth_focus
			}
			if = {
				limit = { has_government = fascism }
				add_popularity = {
					ideology = fascism
					popularity = 0.2
				}
				custom_effect_tooltip = linebreak
			}
			if = {
				limit = { has_government = communism }
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
				custom_effect_tooltip = linebreak
			}
			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_f_tt
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_lend_lease
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = neutrality_focus }
		x = 0
		y = 1
		relative_position_id = neutrality_focus
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4
			modifier = {
				factor = 2
				OR = {
					tag = SWE
					tag = NOR
					any_neighbor_country = {
						OR = {
							tag = GER
							tag = SOV
							tag = ITA
						}
					}	# Deterrence!
				}
			}

			modifier = {
				factor = 3
				OR = {
					has_country_flag = AI_plan_Defense_Fast
				}
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					#has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			hidden_effect = {
				#Modifies AI, but produces no effect text and is confusing to the end user.
				every_other_country = {
					limit = {
						is_major = yes
						has_government = ROOT
					}
					ROOT = {
						add_ai_strategy = {
							type = support
							id = PREV
							value = 200
						}
					}
				}
			}
			add_ideas = generic_lend_lease

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_n_tt
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

	focus = {
		id = deterrence
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = generic_lend_lease }
		x = 0
		y = 1
		relative_position_id = generic_lend_lease
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 3200	#Tier 5
			modifier = {
				factor = 1.5
				OR = {
					tag = SWE
					tag = NOR
					any_neighbor_country = {
						OR = {
							tag = GER
							tag = SOV
							tag = ITA
						}
					}	# Deterrence!
				}
			}

			modifier = {
				factor = 1.5
				OR = {
					has_country_flag = AI_plan_Defense_Fast
				}
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					#has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = generic_lend_lease
				add_idea = deterrence
			}
			custom_effect_tooltip = generic_deterrence_reward_tt
			hidden_effect = {
				every_owned_state = {
					limit = { 
						is_controlled_by = ROOT
						any_neighbor_state = {
							NOT = { is_owned_and_controlled_by = ROOT }
						}
					}
					add_building_construction = {
						type = bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_border = yes
						}
					}
				#ADDS TO CONSTRUCTION QUEUE, PARTICULARLY USEFUL FOR AI
					add_building_construction = {
						type = bunker
						level = 3
						instant_build = no
						province = {
							all_provinces = yes
							limit_to_border = yes
						}
					}
				} #End Foritify Borders bloc
				every_owned_state = {
					limit = { 
						is_controlled_by = ROOT
						is_coastal = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_naval_base  = yes
						}
					}
				#ADDS TO CONSTRUCTION QUEUE, PARTICULARLY USEFUL FOR AI
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = no
						province = {
							all_provinces = yes
							limit_to_naval_base  = yes
						}
					}
				} #End Fortify Naval Bases bloc
				every_owned_state = {
					limit = { 
						is_controlled_by = ROOT
						is_coastal = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 1
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_coastal = yes
						}
					}
				#ADDS TO CONSTRUCTION QUEUE, PARTICULARLY USEFUL FOR AI
					add_building_construction = {
						type = coastal_bunker
						level = 3
						instant_build = no
						province = {
							all_provinces = yes
							limit_to_coastal = yes
						}
					}
				} #End Fortify Coasts bloc
			} # End Hidden Effects Bloc

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_n_tt
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc

			### Configuring AI strategy
			if = {
				limit = { 
					has_war = yes
					NOT = { has_country_flag = AI_plan_DefCon1_finished }
				}
				set_country_flag = AI_plan_DefCon1
			}
			clr_country_flag = AI_plan_Defense_Fast
			set_country_flag = AI_plan_Defense_Fast_finished 
			if {
				limit = { NOT = { has_country_flag = AI_plan_Defense_Full_finished } }
				set_country_flag = AI_plan_Defense_Full
			}
		} # End Rewards Bloc
	}

	focus = {
		id = volunteer_corps
		icon = GFX_focus_generic_little_entente
		prerequisite = { focus = interventionism_focus }
		x = 0
		y = 1
		relative_position_id = interventionism_focus
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}
		completion_reward = {
			add_ideas = volunteer_corps_focus

## Focus Synergy Reward
			if = {
				limit = { has_completed_focus = generic_war_on_terror }
				custom_effect_tooltip = generic_intervention_police_synergy_tt
				swap_ideas = {
					remove_idea = volunteer_corps_focus
					add_idea = generic_world_interventionism_1
				}
			} # End Synergy Bloc

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_d_tt
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

	focus = {
		id = paramilitarism
		icon = GFX_goal_generic_military_sphere
		prerequisite = { focus = military_youth }
		x = 0
		y = 2
		relative_position_id = military_youth
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL  }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 4800	#Tier 6

			modifier = {
				factor = 1.2
				has_war = yes		# DEFCON1
			}

			modifier = {
				factor = 1.2
				has_country_flag = AI_plan_DefCon1
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					#has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}

			modifier = {
				factor = 1.5
				has_manpower < 100000
			}
		}
		completion_reward = {
			swap_ideas = {
				remove_idea = military_youth_focus
				add_idea = paramilitarism_focus
			}
			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_f_tt
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

	focus = {
		id = indoctrination_focus
		icon = GFX_goal_generic_propaganda
		prerequisite = { focus = political_correctness }
		x = 0
		y = 1
		relative_position_id = political_correctness
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 3200	#Tier 5

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					#has_country_flag = AI_plan_DefCon1		# Disabled this as an alternative path for communist countries on DefCon1.
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = idea_political_correctness
				add_idea = indoctrination_focus
			}
			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_c_tt
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc
			add_political_power = 150
		}
	}

#### TODO
	focus = {
		id = generic_mass_media
		icon = GFX_goal_generic_radar
		prerequisite = { focus = deterrence }
		x = 0
		y = 2
		relative_position_id = deterrence
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 6400	#Tier 6

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = deterrence
				add_idea = generic_mass_media
			}
			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				if = {
					limit = { has_government = fascism }
					add_popularity = {
						ideology = fascism
						popularity = 0.1
					}
					custom_effect_tooltip = linebreak
				}
				if = {
					limit = { has_government = communism }
					add_popularity = {
						ideology = communism
						popularity = 0.1
					}
					custom_effect_tooltip = linebreak
				}
				if = {
					limit = { has_government = neutrality }
					add_popularity = {
						ideology = neutrality
						popularity = 0.1
					}
					custom_effect_tooltip = linebreak
				}
				if = {
					limit = { has_government = democratic }
					add_popularity = {
						ideology = democratic
						popularity = 0.1
					}
					custom_effect_tooltip = linebreak
				}
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_n_tt
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

	focus = {
		id = foreign_expeditions
		icon = GFX_goal_generic_position_armies
		prerequisite = { focus = volunteer_corps }
		x = 0
		y = 1
		relative_position_id = volunteer_corps
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 3200	#Tier 5

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}
		completion_reward = {
			hidden_effect= {
				every_other_country = {
					limit = {
						is_major = yes
						has_government = ROOT
					}
					ROOT = {
						add_ai_strategy = {
							type = support
							id = PREV
							value = 200
						}
					}
				}
			}

			swap_ideas = {
				remove_idea = volunteer_corps_focus
				add_idea = foreign_expeditions_focus
			}

## Focus Synergy Reward
			if = {
				limit = { has_completed_focus = generic_war_on_terror }
				custom_effect_tooltip = generic_intervention_police_synergy_tt
				swap_ideas = {
					remove_idea = foreign_expeditions_focus
					add_idea = generic_world_interventionism_2
				}
			}

			if = {
				limit = { has_completed_focus = generic_war_on_terror }
				custom_effect_tooltip = generic_police_expedition_synergy_tt
				swap_ideas = {
					remove_idea = generic_world_police_1
					add_idea = generic_world_police_2
				}
			}
			# End Synergy Bloc

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_d_tt
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_mercenary_army
		icon = GFX_focus_mercenary_army
		prerequisite = { focus = foreign_expeditions }
		x = 0
		y = 2
		relative_position_id = foreign_expeditions
		cost = 10
	
		search_filters = { FOCUS_FILTER_MANPOWER }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 4800	#Tier 6

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = foreign_expeditions_focus
				add_idea = generic_mercenary_army
			}

			#unlock_decision_category_tooltip = generic_mercenary_army_category
			custom_effect_tooltip = generic_mercenary_army_tt
			
			division_template = {
			    name = "Mercenary Division"
			    is_locked = yes
			    #division_names_group = GENERIC_MER_01	#Disabled due to issues with dynamic templates
			    priority = 2
			    template_counter = 2
				regiments={
					infantry = { x=0 y=0 }
					infantry = { x=0 y=1 }
					infantry = { x=0 y=2 }
					infantry = { x=0 y=3 }
					infantry = { x=0 y=4 }
				}
				support={
					recon	  = { x=0 y=0 }
					engineer  = { x=0 y=1 }
					artillery = { x=0 y=2 }  
				}
			}

## Focus Synergy Reward
			if = {
				limit = { has_completed_focus = generic_war_on_terror }
				custom_effect_tooltip = generic_intervention_police_synergy_tt
				swap_ideas = {
					remove_idea = generic_mercenary_army
					add_idea = generic_world_interventionism_3
				}
			} # End Synergy Bloc

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_d_tt
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

	focus = {
		id = political_commissars
		icon = GFX_focus_generic_military_mission #GFX_goal_generic_forceful_treaty
		prerequisite = { focus = indoctrination_focus }
		available = {
		}
		x = 0
		y = 2
		relative_position_id = indoctrination_focus
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL  }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 4800	#Tier 6

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					#has_country_flag = AI_plan_DefCon1		# Disabled this as an alternative path for communist countries on DefCon1.
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = indoctrination_focus
				add_idea = political_commissars_focus
			}
			if = {
				limit = { has_government = fascism }
				add_popularity = {
					ideology = fascism
					popularity = 0.2
				}
				custom_effect_tooltip = linebreak
			}
			if = {
				limit = { has_government = communism }
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
				custom_effect_tooltip = linebreak
			}
			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_c_tt
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc
			add_political_power = 200
		}
	}

#### TODO
	focus = {
		id = generic_kitchen_women
		icon = GFX_focus_kitchen_women
		prerequisite = { focus = military_youth focus = indoctrination_focus }
		mutually_exclusive = { focus = generic_worker_women focus = generic_equality_women }
		x = 1
		y = 1
		relative_position_id = indoctrination_focus
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER FOCUS_FILTER_FRA_POLITICAL_VIOLENCE }

#		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = yes

		available = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = fascist_influence_trigger_tt	
					OR = {
						has_idea = fascist_influence
						has_idea = nationalism
						has_idea = fluid_fascism_1
						has_idea = fluid_fascism_2
						has_idea = fluid_fascism_3
						has_idea = fluid_fascism_4
						has_idea_with_trait = fascist_demagogue
					}
				}
				fascism > 0.20
			}
		}

		ai_will_do = {
			factor = 10		#Special Options
			modifier = {
				factor = 0
				NOT = { has_government = fascism }
			}
			modifier = {
				factor = 0.5
				has_stability < 0.5 
			}
			modifier = {
				factor = 100
				has_manpower < 40000
			}
		}

		completion_reward = {
			# The idea already incorporates a permanent -0.10 stability malus.
			add_ideas = generic_kitchen_women

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_f_tt
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_worker_women
		icon = GFX_focus_worker_women
		prerequisite = { focus = military_youth focus = indoctrination_focus focus = deterrence focus = foreign_expeditions }
		mutually_exclusive = { focus = generic_kitchen_women focus = generic_equality_women }
		x = 2
		y = 0
		relative_position_id = generic_kitchen_women
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

#		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = yes

		available = {
			OR = {
				communism > 0.20
				has_war_support > 0.30
				custom_trigger_tooltip = {
					tooltip = communist_influence_trigger_tt	
					OR = {
						has_idea = communist_influence
						has_idea = internationalism
						has_idea = fluid_communism_1
						has_idea = fluid_communism_2
						has_idea = fluid_communism_3
						has_idea = fluid_communism_4
					has_idea_with_trait = communist_revolutionary
					}
				}
			}
		}

		ai_will_do = {
			factor = 10		#Special Options
			modifier = {
				factor = 0.5
				has_government = fascism
			}
			modifier = {
				factor = 0.5
				is_major = yes
			}
			modifier = {
				factor = 0.5
				has_stability < 0.5 
			}
			modifier = {
				factor = 5
				has_government = communism
			}
			modifier = {
				factor = 2
				has_war = yes
			}
			modifier = {
				factor = 50
				is_major = no
				has_idea = war_economy
			}
			modifier = {
				factor = 100
				has_idea = tot_economic_mobilisation
			}
		}

		completion_reward = {
			add_stability = -0.10 #Temporary and recoverable, whereas kitchen_women is permanent via idea.
			add_ideas = generic_worker_women
			custom_effect_tooltip = generic_worker_women_tt

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_d_tt
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_equality_women
		icon = GFX_focus_equality_women
		prerequisite = { focus = indoctrination_focus focus = deterrence focus = foreign_expeditions }
		mutually_exclusive = { focus = generic_kitchen_women focus = generic_worker_women }
		x = 2
		y = 0
		relative_position_id = generic_worker_women
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER }

#		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = yes

		available = {
			OR = {
				AND = { communism > 0.30 has_manpower < 40000 }
				surrender_progress > 0
				enemies_strength_ratio > 1
				threat > 0.8
			}
		}

		ai_will_do = {
			factor = 10		#Special Options
			modifier = {
				factor = 0
				has_government = fascism
			}
			modifier = {
				factor = 0
				is_major = yes
			}
			modifier = {
				factor = 0.5
				has_stability < 0.5
			}
			modifier = {
				factor = 0.5
				has_war_support  < 0.8
			}
			modifier = {
				factor = 2
				has_government = communism
			}
			modifier = {
				factor = 0.5
				has_war = no
			}
			modifier = {
				factor = 10
				has_idea = service_by_requirement
			}
			modifier = {
				factor = 50
				has_idea = all_adults_serve
			}
			modifier = {
				factor = 300
				has_manpower < 40000
			}
			modifier = {
				factor = 500
				has_idea = scraping_the_barrel
			}
		}
		completion_reward = {
			add_stability = -0.10 #Temporary and recoverable, whereas kitchen_women is permanent via idea.
			add_ideas = generic_equality_women

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_c_tt
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc			
		}
	}

#### TODO
	focus = {
		id = generic_national_zeal
		icon = GFX_focus_spr_the_anti_fascist_workers_revolution
		prerequisite = { focus = paramilitarism focus = political_commissars focus = generic_mass_media }
		mutually_exclusive = { focus = generic_comraderie focus = generic_homefront }
		x = 1
		y = 1
		relative_position_id = political_commissars
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER  }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes


		available = {
			OR = {
				fascism > 0.30
				custom_trigger_tooltip = {
					tooltip = fascist_influence_trigger_tt	
					OR = {
						has_idea = fascist_influence
						has_idea = nationalism
						has_idea = fluid_fascism_1
						has_idea = fluid_fascism_2
						has_idea = fluid_fascism_3
						has_idea = fluid_fascism_4
						has_idea_with_trait = fascist_demagogue
					}
				}
				AND = {
					has_war = yes
					has_war_support > 0.50
				}
			}
		}

		ai_will_do = {
			factor = 10		#Special Options
			modifier = {
				factor = 5
				has_government = fascism
			}
			modifier = {
				factor = 2
				has_stability < 0.5
			}
			modifier = {
				factor = 0.5
				has_war = no
			}
			modifier = {
				factor = 50
				has_defensive_war = yes
			}
			modifier ={
				factor = 50
				has_idea = generic_kitchen_women
			}
			modifier = {
				factor = 50
				has_manpower < 80000
			}
			modifier = {
				factor = 50
				surrender_progress > 0
			}
			modifier = {
				factor = 50
				enemies_strength_ratio > 0.80
			}
		}

		completion_reward = {
			add_ideas = generic_national_zeal
			custom_effect_tooltip = generic_national_zeal_force_attack_tt
			#Modeled after CHI's Dare to Die Corps focus. It is not a real focus effect, but directly modded in common/abilities

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_f_tt
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
			} # End Fluid Ideology Option ON Bloc
		}
	}

#### TODO
	focus = {
		id = generic_comraderie
		icon = GFX_focus_comraderie
		prerequisite = { focus = paramilitarism focus = political_commissars focus = generic_mass_media }
		mutually_exclusive = { focus = generic_national_zeal focus = generic_homefront }
		x = 2
		y = 0
		relative_position_id = generic_national_zeal
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes


		available = {
			OR = {
				communism > 0.30
				custom_trigger_tooltip = {
					tooltip = communist_influence_trigger_tt	
					OR = {
						has_idea = communist_influence
						has_idea = internationalism
						has_idea = fluid_communism_1
						has_idea = fluid_communism_2
						has_idea = fluid_communism_3
						has_idea = fluid_communism_4
					has_idea_with_trait = communist_revolutionary
					}
				}
				has_defensive_war = yes
			}
		}

		ai_will_do = {
			factor = 10		#Special Options
			modifier = {
				factor = 5
				has_government = communism
			}
			modifier = {
				factor = 0.5
				has_war = no
			}
			modifier = {
				factor = 5
				has_defensive_war = yes
			}
			modifier ={
				factor = 5
				has_idea = generic_equality_women
			}
			modifier = {
				factor = 50
				surrender_progress > 0
			}
			modifier = {
				factor = 50
				enemies_strength_ratio > 1
			}
		}

		completion_reward = {
			add_ideas = generic_comraderie
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_c_tt
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc			
		}
	}

#### TODO
	focus = {
		id = generic_homefront
		icon = GFX_focus_usa_guarantee_the_american_dream
		prerequisite = { focus = political_commissars focus = generic_mass_media focus = generic_mercenary_army }
		mutually_exclusive = { focus = generic_national_zeal focus = generic_comraderie }
		x = 2
		y = 0
		relative_position_id = generic_comraderie
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY FOCUS_FILTER_WAR_SUPPORT }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes


		available = {
			# OR = {
				threat > 0.5
				democratic > 0.30
				#has_war = yes   #this seems to be too easy a req and leady too many neutral/communists taking this focus despite AI weights.
			# }
			# communism < 0.4
			# fascism < 0.4
		}

		ai_will_do = {
			factor = 10		#Special Options
			modifier = {
				factor = 0.5
				has_war = no
			}
#			modifier = {
#				factor = 20
# Deleted. Cannot check for context scope in AI modifiers. Is there a way to check for volunteers sent?
#			}
			modifier = {
				factor = 4
				threat > 0.50
			}
			modifier = {
				factor = 4
				threat > 0.70
			}
			modifier = {
				factor = 4
				threat > 0.90
			}
		}

		completion_reward = {
			add_ideas = generic_homefront

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					custom_effect_tooltip = fluid_d_plus_tt
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_d_tt
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

	focus = {
		id = ideological_fanaticism
		icon = GFX_goal_generic_attack_allies
		prerequisite = { focus = paramilitarism focus = political_commissars }
		x = 1
		y = 1
		relative_position_id = paramilitarism
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 5000	#Tier 7

			modifier = {
				factor = 1.2
				has_war = yes		# DEFCON1
			}

			modifier = {
				factor = 1.2
				has_country_flag = AI_plan_DefCon1
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					#has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}

			modifier = {
				factor = 1.2
				has_manpower < 100000
			}
		}

		completion_reward = {
			add_ideas = ideological_fanaticism_focus
			set_rule = {
				can_create_factions = yes
			}
			hidden_effect = {
				set_rule = { can_use_kamikaze_pilots = yes }
			}
			custom_effect_tooltip = kamikaze_focus_tooltip

			### Configuring AI strategy
			clr_country_flag = AI_plan_DefCon1
			set_country_flag = AI_plan_DefCon1_finished 
			if = {
				limit = { NOT = { has_country_flag = AI_plan_mil_prod_finished } }
				set_country_flag = AI_plan_mil_prod
			}

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_c_f_tt
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 365 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Reward Bloc
	}
	
	focus = {
		id = why_we_fight
		icon = GFX_goal_continuous_boost_freedom
		prerequisite = { focus = generic_mass_media focus = generic_mercenary_army }
		x = -1
		y = 1
		relative_position_id = generic_mercenary_army
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT }

#		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = yes

		available = { 
			OR = { 
				threat > 0.75 
				has_defensive_war = yes 
			}
		}
		
		ai_will_do = {
			factor = 5000	#Tier 7

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_ideas = why_we_fight_focus
			custom_effect_tooltip = why_we_fight_effect
			hidden_effect = {
				if = {
					limit = { NOT = { has_idea = neutrality_idea } }
					set_rule = { can_create_factions = yes }
				}			
			}

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				if = {
					limit = { democratic < 20 }
					add_popularity = {
						ideology = democratic
						popularity = 0.2
					}
				}
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_d_n_tt
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} #End Rewards Bloc
	}

	focus = {
		id = technology_sharing
		icon = GFX_goal_generic_scientific_exchange
		prerequisite = { focus = ideological_fanaticism focus = why_we_fight }
		x = 6
		y = 1
		relative_position_id = ideological_fanaticism
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH }

#		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = yes

		available = {
			has_war = yes
			is_in_faction = yes
			OR = {
				num_of_factories > 50
				any_other_country = {
					is_in_faction_with = ROOT
					num_of_factories > 50
				}
			}
		}		

		ai_will_do = {
			factor = 5000 #Tier 8
			modifier = {
				factor = 0.1
				original_research_slots > 2
			}
			modifier = {
				factor = 0.2
				has_tech = advanced_infantry_weapons
			}
			modifier = {
				factor = 0.5
				has_tech = advanced_computing_machine
			}
			modifier = {
				factor = 0.5
				has_tech = advanced_centimetric_radar
			}
			modifier = {
				factor = 0.3
				has_tech = concentrated_industry5
			}
			modifier = {
				factor = 0.3
				has_tech = dispersed_industry5
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}
		completion_reward = {
			if = {
				limit = {
					original_research_slots < 3
				}
				add_research_slot = 1
			}
			if = {
				limit = {
					original_research_slots > 2
				}
				add_tech_bonus = {
					name = electronics_bonus
					bonus = 1.0
					uses = 1
					category = electronics
				}
				add_tech_bonus = {
					name = industrial_bonus
					bonus = 1.0
					uses = 1
					category = industry
				}	
				add_tech_bonus = {
					name = infantry_artillery_bonus #@#
					bonus = 1.0
					uses = 1
					category = infantry_weapons
					category = artillery
				}				
			}			
		} # End Rewards Bloc
	}	

#### TODO
	focus = {
		id = generic_iron_curtain
		icon = GFX_goal_tfv_generic_tech_sharing
		prerequisite = { focus = ideological_fanaticism focus = why_we_fight }
		mutually_exclusive = { focus = generic_freeflow_ideas }
		x = -4
		y = 0
		relative_position_id = technology_sharing
		cost = 10
	
		search_filters = { FOCUS_FILTER_RESEARCH }

#		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = yes

		available = {
			OR = {
				fascism > 0.30
				custom_trigger_tooltip = {
					tooltip = fascist_influence_trigger_tt	
					OR = {
						has_idea = fascist_influence
						has_idea = nationalism
						has_idea = fluid_fascism_1
						has_idea = fluid_fascism_2
						has_idea = fluid_fascism_3
						has_idea = fluid_fascism_4
						has_idea_with_trait = fascist_demagogue
					}
				}
				AND = {
					has_war = yes
					has_war_support > 0.50
				}
			}
			NOT = { has_completed_focus = generic_globalism }
		}

		ai_will_do = {
			factor = 5000 #Tier 8
			modifier = {
				factor = 0
				has_government = democratic
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			custom_effect_tooltip = generic_iron_curtain_tldr_tt
			hidden_effect = {
				add_tech_bonus = {
					name = tech_bonus_iron_curtain
					ahead_reduction = 3
					uses = 5
					category = infantry_weapons
					category = para_tech   #Not included in infantry tech, but mountaineer was.
					category = marine_tech #Not included in infantry tech, but mountaineer was.

					category = infantry_tech #includes motorized & mechanized, but not weapons
					category = support_tech
					category = artillery
					
					category = armor 
					category = air_equipment
					category = naval_equipment
		
					category = industry
					category = electronics
					category = rocketry
					category = nuclear
					category = jet_technology
				}
			}
			add_ideas = generic_iron_curtain

			if = {
				limit = { has_idea = free_trade }
				swap_ideas = {
					remove_idea = free_trade
					add_idea = export_focus
				}
			}
			custom_effect_tooltip = generic_iron_curtain_policy_tt

## Focus Synergy Reward
			if = {
				limit = { has_completed_focus = generic_black_budget }
				custom_effect_tooltip = generic_iron_curtain_black_budget_synergy_tt
				custom_effect_tooltip = generic_iron_curtain_tldr_tt2
				hidden_effect = {
					add_tech_bonus = {
						name = tech_bonus_iron_curtain
						ahead_reduction = 5
						uses = 1
						category = infantry_weapons
						category = para_tech   #Not included in infantry tech, but mountaineer was.
						category = marine_tech #Not included in infantry tech, but mountaineer was.

						category = infantry_tech #includes motorized & mechanized
						category = support_tech
						category = artillery
						
						category = armor 
						category = air_equipment
						category = naval_equipment
			
						category = industry
						category = electronics
						category = rocketry
						category = nuclear
						category = jet_technology
					}
				}
			}

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_f_n_tt
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc

		} #End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_freeflow_ideas
		icon = GFX_focus_research2
		prerequisite = { focus = ideological_fanaticism focus = why_we_fight }
		mutually_exclusive = { focus = generic_iron_curtain }
		x = -2
		y = 0
		relative_position_id = technology_sharing
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH }

#		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = yes

		available = {
			OR = {
				fascism < 0.30
				#has_idea = neutrality_idea
				custom_trigger_tooltip = {
					tooltip = democratic_influence_trigger_tt	
					OR = {
						has_idea = democratic_influence
						has_idea = liberty_ethos_focus
						has_idea = fluid_democratic_1
						has_idea = fluid_democratic_2
						has_idea = fluid_democratic_3
						has_idea = fluid_democratic_4
						has_idea_with_trait = democratic_reformer
					}
				}
				custom_trigger_tooltip = {
					tooltip = communist_influence_trigger_tt	
					OR = {
						has_idea = communist_influence
						has_idea = internationalism
						has_idea = fluid_communism_1
						has_idea = fluid_communism_2
						has_idea = fluid_communism_3
						has_idea = fluid_communism_4
					has_idea_with_trait = communist_revolutionary
					}
				}
				has_idea_with_trait = technocrat
			}
			NOT = { has_completed_focus = generic_isolationism }
		}

		ai_will_do = {
			factor = 5000 #Tier 8
			modifier = {
				factor = 0
				has_government = fascism
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_ideas = generic_freeflow_ideas

## Focus Synergy Reward
			if = {
				limit = { has_completed_focus = generic_globalism }
				custom_effect_tooltip = generic_freeflow_ideas_globalism_synergy_tt
				custom_effect_tooltip = generic_freeflow_ideas_bonus_tt
				hidden_effect = {
					every_other_country = {
						limit = {
							OR = {
								has_government = ROOT
								has_government = democratic
							}
						}
						ROOT = {
							add_relation_modifier = {
								target = PREV
								modifier = freeflow_ideas_license
							}
						}
					}
				}
				swap_ideas = {
					remove_idea = generic_freeflow_ideas
					add_idea = generic_empowered_freeflow_ideas
				}
			} # End Synergy Bloc

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_d_c_tt
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} #End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_centralization
		icon = GFX_focus_centralization
		prerequisite = { focus = political_effort }
		mutually_exclusive = { focus = generic_decentralization }
		x = 0
		y = -1
		relative_position_id = generic_land_redistribution
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2

			modifier = {
				factor = 16
				OR = {
					has_country_flag = AI_plan_mil_prod
					has_stability < 0.20
				}
			}
			modifier = {
				factor = 2
				has_stability < 0.30
			}
			modifier = {
				factor = 2
				has_stability < 0.40
			}
			modifier = {
				if = {
					limit = {
						OR = {
							has_completed_focus = neutrality_focus
							has_completed_focus = interventionism_focus
							has_completed_focus = nationalism_focus
							has_completed_focus = internationalism_focus
						}
					}
					factor = 2
					OR = {
						has_stability < 0.50
						has_war = yes
					}
				}
			}
			modifier = {
				factor = 0.25
				has_stability > 0.60
			}
			modifier = {
				factor = 0.25
				has_stability > 0.80
			}
			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					#has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			if = {
				limit = { has_stability < 0.4 }
				set_stability = 0.4
			}
			else = { 
				add_stability = 0.10
			}
			add_ideas = generic_centralization
			custom_effect_tooltip = generic_centralization_tt

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_c_f_tt
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc
		} #End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_decentralization
		icon = GFX_focus_generic_self_management
		prerequisite = { focus = political_effort }
		mutually_exclusive = { focus = generic_centralization }
		x = 9
		y = 1
		relative_position_id = political_effort
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2

			modifier = {
				factor = 1.5
				has_government = democratic
			}
			modifier = {
				factor = 1.5
				if = {
					limit = {
						OR = {
							has_completed_focus = neutrality_focus
							has_completed_focus = interventionism_focus
							has_completed_focus = nationalism_focus
							has_completed_focus = internationalism_focus
						}
					}
					democratic > 0.49
				}
			}
			modifier = {
				factor = 1.5
				if = {
					limit = {
						OR = {
							has_completed_focus = neutrality_focus
							has_completed_focus = interventionism_focus
							has_completed_focus = nationalism_focus
							has_completed_focus = internationalism_focus
						}
					}
					democratic > 0.79
				}
			}
			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_ideas = generic_decentralization

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_d_n_tt
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_nationalize_industries
		icon = GFX_focus_generic_tank_production
		prerequisite = { focus = generic_centralization }
		mutually_exclusive = { focus = generic_land_redistribution focus=generic_autarky focus = generic_industry_subsidies focus = generic_eminent_domain }
		x = -2
		y = 0
		relative_position_id = generic_land_redistribution
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3

			modifier = {
				factor = 2
				has_war = yes
			}
			modifier = {
				factor = 1.5
				num_of_military_factories < 10
			}
			modifier = {
				factor = 2
				has_government = fascism
			}
			modifier = {
				factor = 2
				has_country_flag = AI_plan_mil_prod
			}
		}

		completion_reward = {
			every_owned_state = {
				limit = { is_controlled_by = ROOT }
				if = {
					limit = { num_of_factories < 10 }
					is_in_home_area = yes
				}
				OR = {
					is_in_home_area = yes
					NOT = {
						owner = {
							any_owned_state = {
								free_building_slots = {
									building = arms_factory
									size > 0
									include_locked = yes
								}
								is_in_home_area = yes
							}
						}
					}
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
			} #End Every state bloc
			if = {
				limit = { num_of_controlled_states < 4 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = arms_factory
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			} # End <4 states bloc
			if = {
				limit = { num_of_controlled_states < 2 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = arms_factory
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			} #End <2 states bloc
			if = {
				limit = { num_of_factories < 10 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = arms_factory
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			} #End num of factories bloc

			### Configuring AI strategy
			if = {
				limit = {
					is_in_faction_with = SOV
					NOT = { has_country_flag = AI_plan_Defense_Full_finished }
				}	# To exclude TAN & MON from the next bloc
				set_country_flag = AI_plan_Defense_Full
			}
			else_if = {
				limit = {
					num_of_factories < 12
					NOT = { has_country_flag = AI_plan_infrastructure_finished }
				}
				set_country_flag = AI_plan_infrastructure
			}
			clr_country_flag = AI_plan_mil_prod
			set_country_flag = AI_plan_mil_prod_finished
			if = {
				limit = { NOT = { has_country_flag = AI_plan_WarPrep_Finished } }
				set_country_flag = AI_plan_WarPrep
			}

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_f_tt
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_land_redistribution
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = generic_centralization }
		mutually_exclusive = { focus=generic_nationalize_industries focus = generic_autarky focus = generic_industry_subsidies focus = generic_eminent_domain }
		x = -3
		y = 0
		relative_position_id = generic_autarky
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3

			modifier = {
				factor = 2
				num_of_civilian_factories < 6
			}
			modifier = {
				factor = 2
				num_of_civilian_factories < 12
			}
			modifier = {
				factor = 2
				num_of_factories < 10
			}
			modifier = {
				factor = 2
				has_government = communism
			}
		}

		completion_reward = {
			every_owned_state = {
				limit = { is_controlled_by = ROOT }
				if = {
					limit = { num_of_factories < 10 }
					is_in_home_area = yes
				}
				OR = {
					is_in_home_area = yes
					NOT = {
						owner = {
							any_owned_state = {
								free_building_slots = {
									building = industrial_complex
									size > 0
									include_locked = yes
								}
								is_in_home_area = yes
							}
						}
					}
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
			} #End Every state bloc
			if = {
				limit = { num_of_controlled_states < 4 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = industrial_complex
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			} # End <4 states bloc
			if = {
				limit = { num_of_controlled_states < 2 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = industrial_complex
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			} #End <2 states bloc
			if = {
				limit = { num_of_factories < 10 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = industrial_complex
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			} #End num of factories bloc
			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_c_tt
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_autarky
		icon = GFX_goal_generic_construction
		prerequisite = { focus = generic_centralization focus = generic_decentralization }
		mutually_exclusive = { focus = generic_nationalize_industries focus=generic_land_redistribution focus = generic_industry_subsidies focus = generic_eminent_domain }
		x = -3
		y = 0
		relative_position_id = generic_industry_subsidies
		cost = 10
	
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3
			modifier = {
				factor = 2
				any_owned_state = {
					has_state_category = wasteland
				}
			}
			modifier = {
				factor = 2
				any_owned_state = {
					has_state_category = pastoral
				}
			}
			modifier = {
				factor = 2
				num_of_civilian_factories > 10
			}
		}

		completion_reward = {
			#add_ideas = generic_autarky
			add_ideas = GER_autarky_idea
			add_tech_bonus = {
				name = tech_bonus_autarky
				bonus = 1.0
				uses = 2
				category = excavation_tech
			}
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					OR = {
						has_state_category = pastoral
						has_state_category = wasteland
					}
				}
				set_state_category = rural
			}
			every_owned_state = {
				limit = { is_controlled_by = ROOT }
				#add_extra_state_shared_building_slots = 1
				add_state_modifier = { modifier = { local_resources = 0.20 } }
			} #End Every state bloc

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_n_c_tt
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc

		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_industry_subsidies
		icon = GFX_focus_generic_concessions
		prerequisite = { focus = generic_decentralization }
		mutually_exclusive = { focus = generic_nationalize_industries focus=generic_land_redistribution focus = generic_autarky focus = generic_eminent_domain }
		x = -2
		y = 0
		relative_position_id = generic_eminent_domain
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3
			modifier = {
				factor = 2
				has_government = democratic
			}
			modifier = {
				factor = 1.5
				any_owned_state = {
					has_state_category = wasteland
				}
			}
			modifier = {
				factor = 1.5
				any_owned_state = {
					has_state_category = pastoral
				}
			}
			modifier = {
				factor = 2
				num_of_military_factories > 10
			}
		}

		completion_reward = {
			add_ideas = generic_industry_subsidies
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					OR = {
						has_state_category = pastoral
						has_state_category = wasteland
					}
				}
				set_state_category = rural
			}
			#End Every state bloc

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_c_d_tt
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc

		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_eminent_domain
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = generic_decentralization }
		mutually_exclusive = { focus = generic_nationalize_industries focus=generic_land_redistribution focus = generic_autarky focus = generic_industry_subsidies }
		x = 2
		y = 1
		relative_position_id = generic_decentralization
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3
			modifier = {
				factor = 2
				num_of_civilian_factories > 14
			}
			modifier = {
				factor = 2
				num_of_civilian_factories > 24
			}
			modifier = {
				factor = 2
				num_of_civilian_factories > 29
			}
		}

		completion_reward = {
			# every_owned_state = {
			# 	limit = { is_controlled_by = ROOT }
			# 	add_state_modifier = { modifier = { local_building_slots_factor = 0.3 } }
			# } #End Every state building slot bloc
			#Using Global modifier instead
			add_ideas = generic_eminent_domain
			every_owned_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			} #End Every state infrastructure bloc

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_f_n_tt
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_nationalism
		icon = GFX_focus_spr_masters_of_our_own_fate
		prerequisite = { focus = generic_nationalize_industries focus = generic_autarky focus = generic_eminent_domain }
		mutually_exclusive = { focus = generic_socialism focus=generic_republicanism focus = generic_federalism }
		x = -1
		y = 2
		relative_position_id = generic_centralization
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 0
				tag = SWI
			}

			modifier = {
				factor = 1.5
				has_government = fascism
			}
			modifier = {
				factor = 1.5
				has_war_support < 15 # Prereq for Limited Conscription / Early Mobilization
			}
			modifier = {
				factor = 1.5
				has_war_support < 25 # Prereq for Extensive Conscription / Partial Mobilization
			}
			modifier = {
				factor = 1.5
				has_war_support < 60 # Prereq for Service by Requirement / War Economy 
			}
			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_ideas = generic_nationalism

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_f_tt
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_socialism
		icon = GFX_focus_spr_class_war
		prerequisite = { focus = generic_nationalize_industries focus=generic_land_redistribution focus = generic_autarky focus = generic_industry_subsidies }
		mutually_exclusive = { focus = generic_nationalism focus=generic_republicanism focus = generic_federalism }
		x = 1
		y = 2
		relative_position_id = generic_centralization
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 1.5
				has_government = communism
			}
			modifier = {
				factor = 1.5
				has_stability < 0.20
			}
			modifier = {
				factor = 1.5
				has_stability < 0.35
			}
			modifier = {
				factor = 1.5
				has_stability < 0.50
			}
			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_ideas = generic_socialism

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_c_d_tt
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_republicanism
		icon = GFX_goal_continuous_increase_nu
		prerequisite = { focus = generic_autarky focus = generic_industry_subsidies focus = generic_eminent_domain }
		mutually_exclusive = { focus = generic_nationalism focus=generic_socialism focus = generic_federalism }
		x = -1
		y = 2
		relative_position_id = generic_decentralization
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 1.5
				OR = {
					has_government = neutrality
					has_government = democratic
				}
			}			
			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_ideas = generic_republicanism
#			set_politics = {
#				ruling_party = ROOT
#				elections_allowed = yes
#				election_frequency = 36
#			}
#			hold_election = ROOT
#Elections requires new scripts to be programmed in on_new_term_election 

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_d_n_tt
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_federalism
		icon = GFX_focus_generic_diplomatic_treaty
		prerequisite = { focus = generic_nationalize_industries focus = generic_autarky focus = generic_eminent_domain }
		mutually_exclusive = { focus = generic_nationalism focus=generic_socialism focus = generic_republicanism }
		x = 1
		y = 2
		relative_position_id = generic_decentralization
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 1.5
				has_government = democratic
			}			
			modifier = {
				factor = 1.5
				has_completed_focus = interventionism_focus
			}
			modifier = {
				factor = 1.5
				has_war = yes
			}
			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_ideas = generic_federalism
#			set_politics = {
#				ruling_party = ROOT
#				elections_allowed = yes
#				election_frequency = 48
#			}
#			hold_election = ROOT
#Elections requires new scripts to be programmed in on_new_term_election 

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_f_d_tt
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc

		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_imperialism
		icon = GFX_focus_spa_the_war_of_vengeance
		prerequisite = { focus = generic_nationalism focus = generic_federalism }
		mutually_exclusive = { focus = generic_isolationism focus = generic_globalism }
		x = -3
		y = 2
		relative_position_id = generic_autarky
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER FOCUS_FILTER_ANNEXATION }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 3200	#Tier 5

			modifier = {
				factor = 0
				tag = SWI
			}

			modifier = {
				factor = 1.5
				has_government = fascism
			}

			modifier = {
				factor = 1.5
				has_offensive_war = yes
			}

			modifier = {
				factor = 1.5
				has_stability < 0.5	# To get Supreme Leader
			}
			modifier = {
				factor = 1.5
				has_stability < 0.35 # To get Supreme Leader
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			if = {
				limit = { has_idea = neutrality_idea }
				remove_ideas = neutrality_idea
			}
			add_ideas = generic_imperialism

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_f_tt
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
			} # End Fluid Ideology Option ON Bloc
		}
	}

#### TODO
	focus = {
		id = generic_isolationism
		icon = GFX_goal_generic_wolf_pack
		prerequisite = { focus = generic_socialism focus = generic_republicanism focus = generic_federalism }
		mutually_exclusive = { focus = generic_imperialism focus = generic_globalism }
		x = 0
		y = 2
		relative_position_id = generic_autarky
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_FRA_POLITICAL_VIOLENCE }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		available = {
			NOT = { has_completed_focus = generic_freeflow_ideas }
		}

		ai_will_do = {
			factor = 3200	#Tier 5

# This feels thematically weird and don't want to risk too many AI using it. Still evaluating.
			# modifier = {
			# 	factor = 1.5
			# 	if = {
			# 		limit = { has_war_support < 0.45 }
			# 		AND = {
			# 			surrender_progress > 0
			# 			enemies_strength_ratio > 2.00
			# 		}
			# 	}
			# }
			# modifier = {
			# 	factor = 1.5
			# 	AND = {
			# 		surrender_progress > 0
			# 		enemies_strength_ratio > 4.00
			# 	}
			# }
			modifier = {
				factor = 0.5
				num_of_controlled_states > 4
			}
			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			hidden_effect = {
				set_rule = {
					can_be_called_to_war = no
					can_decline_call_to_war = yes
				}
			}
			add_ideas = generic_isolationism

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_n_c_tt
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc

		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_globalism
		icon = GFX_focus_hol_the_fourth_ally
		prerequisite = { focus = generic_socialism focus = generic_republicanism focus = generic_federalism }
		mutually_exclusive = { focus = generic_imperialism focus = generic_isolationism }
		x = 3
		y = 2
		relative_position_id = generic_autarky
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		available = {
			NOT = { has_completed_focus = generic_iron_curtain }
		}

		ai_will_do = {
			factor = 3200	#Tier 5

			modifier = {
				factor = 0
				tag = SWI
			}

			modifier = {
				factor = 1.5
				has_government = democratic
			}

			modifier = {
				factor = 1.5
				has_defensive_war = yes
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			if = {
				limit = { has_idea = neutrality_idea }
				remove_ideas = neutrality_idea
			}
			hidden_effect = {
				set_rule = {
					can_send_volunteers = yes
				}
			}
			add_ideas = generic_globalism
			if = {
				limit = { has_idea = closed_economy }
				swap_ideas = {
					remove_idea = closed_economy
					add_idea = limited_exports
				}
			}
			custom_effect_tooltip = generic_globalism_tt

## Focus Synergy Reward
			if = {
				limit = { has_completed_focus = generic_freeflow_ideas }
				custom_effect_tooltip = generic_globalism_freeflow_ideas_synergy_tt
				custom_effect_tooltip = generic_freeflow_ideas_bonus_tt
				hidden_effect = {
					every_other_country = {
						limit = {
							OR = {
								has_government = ROOT
								has_government = democratic
							}
						}
						ROOT = {
							add_relation_modifier = {
								target = PREV
								modifier = freeflow_ideas_license
							}
						}
					}
				}
				swap_ideas = {
					remove_idea = generic_freeflow_ideas
					add_idea = generic_empowered_freeflow_ideas
				}
			} # End Synergy Bloc

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_d_c_tt
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}
	
#### TODO
	focus = {
		id = generic_supreme_leader
		icon = GFX_focus_generic_home_defense
		prerequisite = { focus = generic_imperialism focus = generic_isolationism }
		x = 0
		y = 2
		relative_position_id = generic_imperialism
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 4800	#Tier 6
		}

		completion_reward = {
			add_country_leader_trait = cult_personality
			if = {
				limit = { has_completed_focus = generic_nationalism }
				add_country_leader_trait = nationalist_symbol
			}
			else_if = {
				limit = {
					OR = {
						has_completed_focus = generic_republicanism
						AND = {
							has_completed_focus = generic_federalism
							has_completed_focus = generic_isolationism
						}
					}
				}
				add_country_leader_trait = emergency_powers
			}
			else_if = {
				limit = { has_completed_focus = generic_socialism }
				add_country_leader_trait = dictator
			}
			else_if = {
				limit = {
					has_completed_focus = generic_federalism
					has_completed_focus = generic_imperialism
				}
				add_country_leader_trait = empire_builder
			}
			else = {
				custom_effect_tooltip = generic_supreme_leader_tt
			}
			
			custom_effect_tooltip = generic_supreme_leader_cancel_elections_tt
			hidden_effect = {
				set_politics = {
					ruling_party = ROOT
					elections_allowed = no
				}
			}

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_f_n_tt
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc
		} #End Rewards Bloc
	}
	
#### TODO
	focus = {
		id = generic_force_peace
		icon = GFX_focus_CZE_german_puppet
		prerequisite = { focus = generic_isolationism }
		x = 0
		y = 1
		relative_position_id = generic_isolationism
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		available = { has_war = yes }

		ai_will_do = {
			factor = 0 #Band-aid fix for UX. Don't want OPM's canceling out player invasions	 #200	#Special Case Tier 6

			modifier = {
				factor = 0
				num_of_controlled_states > 4
			}
		}

		completion_reward = {
			if = {
				limit = {
					NOT = { has_idea = closed_economy }
				}
				add_ideas = closed_economy
			}
			if = {
				limit = {
					NOT = {
						has_idea = disarmed_nation
					}
				}
				add_ideas = disarmed_nation
			}

## Not working correctly
#			random_owned_controlled_state = {
#				give_resource_rights = {
#					receiver = OVERLORD
#					state = PREV
#				}
#			}

			end_puppet = OVERLORD
			leave_faction = yes
			every_enemy_country = {
				white_peace = {
					tag = ROOT
					#TODO - Add messaging
				}

# Current scoping doesn't make sense, but not sure if keeping this feature
#				random_owned_controlled_state = {
#					ROOT = { 
#						give_resource_rights = {
#							receiver = PREVPREV
#							state = PREV
#						}
#					}
#				}

			} # Every Enemy country bloc for white peace
			every_neighbor_country = {
				set_truce = {
					target = ROOT
					days = 1095
				}
			}
			custom_effect_tooltip = linebreak
			add_timed_idea = { idea = BUL_army_restrictions days = 1095 }
			custom_effect_tooltip = linebreak
			add_timed_idea = { idea = generic_appeasement days = 1095 }
			if = {
				limit = { NOT = { has_idea = neutrality_idea } }
				custom_effect_tooltip = linebreak
				add_timed_idea = { idea = neutrality_idea days = 1095 }
			}
			set_country_flag = forced_peace


			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					custom_effect_tooltip = fluid_n_plus_tt
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_n_tt
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc

		} #End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_end_peace
		icon = GFX_focus_hol_war_on_pacifism
		prerequisite = { focus = generic_force_peace }
		x = 0
		y = 1
		relative_position_id = generic_force_peace
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		available = {
			OR = {
				custom_trigger_tooltip = {
					tooltip = generic_end_peace_tt
					has_country_flag = {
						flag =  forced_peace
						days > 365	
					}
				}
				has_war = yes				
			}
		}

		ai_will_do = {
			factor = 5000	#Tier 7

			modifier = {
				factor = 0.01
				tag = SWI
			}
		}

		completion_reward = {
			if = {
				limit = { has_idea = neutrality_idea }
				remove_ideas = neutrality_idea
			}
			remove_ideas = BUL_army_restrictions
			remove_ideas = generic_appeasement
			add_ideas = limited_conscription
			add_named_threat = {
				threat = 30
				name = generic_end_peace_threat
			}

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					custom_effect_tooltip = fluid_f_plus_tt
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_f_tt
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
			} # End Fluid Ideology Option ON Bloc

		} # End Rewards Bloc
	}


	
#### TODO
	focus = {	
		id = generic_war_on_terror	#Localization changed to World Police or world_police for CTRL-F purposes.
		icon = GFX_goal_generic_territory_or_war
		prerequisite = { focus = generic_globalism }
		x = 0
		y = 2
		relative_position_id = generic_globalism
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_ANNEXATION }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		select_effect = {
			every_country = {
				limit = {
					has_added_tension_amount > 10
					NOT = {
						is_in_faction_with = ROOT
						has_government = ROOT
					}
					OR = {
						is_major = yes
						is_neighbor_of = ROOT
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		available = {
			any_country = {
				has_added_tension_amount > 10
				NOT = {
					is_in_faction_with = ROOT
					has_government = ROOT
				}
				OR = {
					is_major = yes
					is_neighbor_of = ROOT
				}
			}
			#threat > 0.49  #Removed, let's allow democracies to be more interactive.
		}

		ai_will_do = {
			factor = 4800	#Tier 6

			modifier = {
				factor = 0
				num_divisions < 48
			}
			modifier = {
				factor = 0.2
				num_divisions < 72
			}
			modifier = {
				factor = 0.3
				num_divisions < 120
			}
		}

		completion_reward = {
			set_rule = { can_guarantee_other_ideologies = yes }
			hidden_effect = {
				set_rule = {
					can_lower_tension = yes
					can_host_government_in_exile = yes
				}
			}

			custom_effect_tooltip = generic_war_on_terror_tt
			hidden_effect = {
			#Effect needs to be hidden due to the way auto tooltip is parsed (claims "every country" is doing the action)
				every_country = {
					limit = {
						has_added_tension_amount > 10
						NOT = {
							is_in_faction_with = ROOT
							has_government = ROOT
						}
						OR = {
							is_major = yes
							is_neighbor_of = ROOT
						}
					}
					ROOT = {
						create_wargoal = {
							target = PREV
							type = topple_government
							expire = 0
						}
					}
				} #End Every country bloc
			} #End Hidden Effect Bloc

			## TODO: The Portugal Communist Threat focus reward bloc also programmed the AI to immediately declare war. Evaluate if needed here.

			add_ideas = generic_world_police_1

## Focus Synergy Reward
			if = {
				limit = {
					has_completed_focus = volunteer_corps 
					NOT = { has_completed_focus = foreign_expeditions }
				}
				custom_effect_tooltip = generic_police_intervention1_synergy_tt
				swap_ideas = {
					remove_idea = volunteer_corps_focus
					add_idea = generic_world_interventionism_1
				}
			}
			if = {
				limit = {
					has_completed_focus = foreign_expeditions
					NOT = { has_completed_focus = generic_mercenary_army }
				}
				custom_effect_tooltip = generic_police_intervention2_synergy_tt
				swap_ideas = {
					remove_idea = foreign_expeditions_focus
					add_idea = generic_world_interventionism_2
				}
			}
			if = {
				limit = { has_completed_focus = generic_mercenary_army }
				custom_effect_tooltip = generic_police_intervention3_synergy_tt
				swap_ideas = {
					remove_idea = generic_mercenary_army
					add_idea = generic_world_interventionism_3
				}
			}

			if = {
				limit = { has_completed_focus = foreign_expeditions }
				custom_effect_tooltip = generic_police_expedition_synergy_tt
				swap_ideas = {
					remove_idea = generic_world_police_1
					add_idea = generic_world_police_2
				}
			}

			# End Synergy Bloc

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_d_c_tt
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc
		} #End Reward Bloc
	}
	
### Industry Branch

	focus = {
		id = industrial_effort
		icon = GFX_goal_generic_production
		x = 18
		y = 0
		relative_position_id = political_effort
		cost = 5

		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 20	#Tier 1

			modifier = {
				factor = 2
				num_of_factories < 10
			}
			modifier = {
				factor = 2
				num_of_factories < 20
			}

			modifier = {
				factor = 1000
				OR = {
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Full
				}
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					#has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					#has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}
		#ai_will_do = {
		#	factor = 3

			#modifier = { #Silly Dev Bloc
				#factor = 0
				#date < 1939.1.1
				#OR = { 
					# we dont want chinese minors to go crazy on slots early since they get eaten
					# tag = GXC tag = YUN tag = SHX tag = XSM tag = BEL tag = LUX tag = HOL tag = DEN
			### Why not? Why is 3-6 slots a problem even if swallowed?

					# we also dont want tiny nations to go crazy with slots right away
					# num_of_controlled_states < 2
			# 3-6 slots for a puny OPM really is NOT crazy at all, even if gobbled up by super ineffcient China/Russia. Silly devs.
				#}				
			#}		# End Silly Dev Bloc
		#}

		completion_reward = {
			add_tech_bonus = {
				name = industrial_bonus
				bonus = 1.0
				uses = 1
				category = industry
			}
			if = {
				limit = { num_of_factories < 10 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = industrial_complex
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			} #End num of factories bloc

			### Configuring AI strategy
			if = {
				limit = { 
					OR = {
						has_war = yes
						tag = AUS
						tag = ALB
					}
					NOT = { has_country_flag = AI_plan_DefCon1_finished }
				}
				set_country_flag = AI_plan_DefCon1
			}
			else_if {
				limit = {
					is_in_faction_with = SOV
					NOT = { has_country_flag = AI_plan_Defense_Full_finished }
				}	# To exclude TAN & MON from the next bloc
				set_country_flag = AI_plan_Defense_Full
			}
			else_if = {
				limit = {
					OR = {
						tag = SWE #Threatned by Sea
						tag = NOR #Threatned by Sea
						any_neighbor_country = {
							OR = {
								tag = GER
								tag = SOV
								tag = ITA
							}
						}	# Deterrence!
					}
					NOT = { has_country_flag = AI_plan_Defense_Fast_finished }
				}
				set_country_flag = AI_plan_Defense_Fast
			}
			else_if = {
				limit = {
					num_of_factories < 12
					NOT = { has_country_flag = AI_plan_infrastructure_finished }
				}
				set_country_flag = AI_plan_infrastructure
			}
		} #End Rewards Bloc
	} #End Industrial Effort Focus Bloc

	focus = {
		id = construction_effort
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = industrial_effort }
		x = -4
		y = 1
		relative_position_id = industrial_effort
		cost = 10

		search_filters = { FOCUS_FILTER_INDUSTRY  }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		
		ai_will_do = {
			factor = 200 #Tier 2

			modifier = {
				factor = 2
				num_of_civilian_factories < 10
			}
			modifier = {
				factor = 2
				num_of_factories < 20
			}

			modifier = {
				factor = 10
				has_country_flag = AI_plan_infrastructure
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					#has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = construction_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = industrial_complex
						size < 1
						include_locked = yes
					}					
				}
			}
		}

		complete_tooltip = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}			
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = industrial_complex
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			if = {
				limit = { num_of_factories < 10 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = industrial_complex
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			} #End num of factories bloc
		}
	}

	focus = {
		id = production_effort
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = industrial_effort }
		x = 4
		y = 1
		relative_position_id = industrial_effort
		cost = 10

		search_filters = { FOCUS_FILTER_INDUSTRY  }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes


		ai_will_do = {
			factor = 200 #Tier 2

			modifier = {
				factor = 1.5
				num_of_military_factories < 10
			}
			modifier = {
				factor = 1.5
				num_of_military_factories < 5
			}

			modifier = {
				factor = 10
				has_country_flag = AI_plan_Defense_Full
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					#has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = production_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}
				}
			}
		}

		complete_tooltip = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = arms_factory
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			if = {
				limit = { num_of_factories < 10 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = arms_factory
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			} #End num of factories bloc
		}
	}

	focus = {
		id = construction_effort_2
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = construction_effort }
		x = 0
		y = 1
		relative_position_id = construction_effort
		cost = 10

		search_filters = { FOCUS_FILTER_INDUSTRY  }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes


		ai_will_do = {
			factor = 800 #tier 3

			modifier = {
				factor = 2
				num_of_civilian_factories < 10
			}
			modifier = {
				factor = 2
				num_of_factories < 20
			}

			modifier = {
				factor = 3
				has_country_flag = AI_plan_infrastructure
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					#has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = construction_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = industrial_complex
						size < 1
						include_locked = yes
					}
				}
			}
		}

		complete_tooltip = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}		

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = industrial_complex
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			if = {
				limit = { num_of_factories < 10 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = industrial_complex
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			} #End num of factories bloc
		}
	}

	focus = {
		id = construction_effort_3
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = construction_effort_2 }
		x = 0
		y = 1
		relative_position_id = construction_effort_2
		cost = 10

		search_filters = { FOCUS_FILTER_INDUSTRY  }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes


		ai_will_do = {
			factor = 1600 #Tier 4

			modifier = {
				factor = 2
				num_of_civilian_factories < 10
			}
			modifier = {
				factor = 2
				num_of_factories < 20
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = construction_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = industrial_complex
						size < 2
						include_locked = yes
					}
				}
			}
		}

		complete_tooltip = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = industrial_complex
										size > 1
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			if = {
				limit = { num_of_factories < 20 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = industrial_complex
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			} #End num of factories bloc
		}
	}

	focus = {
		id = production_effort_2
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = production_effort }
		x = 0
		y = 1
		relative_position_id = production_effort
		cost = 10
		
		search_filters = { FOCUS_FILTER_INDUSTRY  }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes


		ai_will_do = {
			factor = 800 #Tier 3

			modifier = {
				factor = 1.5
				num_of_military_factories < 5
			}
			modifier = {
				factor = 1.5
				num_of_military_factories < 10
			}

			modifier = {
				factor = 3
				has_country_flag = AI_plan_Defense_Full
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					#has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = production_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}
				}
			}
		}

		complete_tooltip = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}		

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = arms_factory
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			if = {
				limit = { num_of_factories < 10 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = arms_factory
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			} #End num of factories bloc
		}
	}

	focus = {
		id = production_effort_3
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = production_effort_2 }
		x = 0
		y = 1
		relative_position_id = production_effort_2
		cost = 10

		search_filters = { FOCUS_FILTER_INDUSTRY  }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes


		ai_will_do = {
			factor = 1600 #Tier 4
			modifier = {
				factor = 1.5
				num_of_military_factories < 5
			}
			modifier = {
				factor = 1.5
				num_of_military_factories < 10
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = production_effort_tt
				all_owned_state = {
					free_building_slots = {
						building = arms_factory
						size < 1
						include_locked = yes
					}					
				}
			}
		}

		complete_tooltip = {
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}		

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = arms_factory
										size > 0
										include_locked = yes
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			if = {
				limit = { num_of_factories < 20 }
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						OR = {
							is_in_home_area = yes
							NOT = {
								owner = {
									any_owned_state = {
										free_building_slots = {
											building = arms_factory
											size > 0
											include_locked = yes
										}
										is_in_home_area = yes
									}
								}
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			} #End num of factories bloc
		}
	}

	focus = {
		id = infrastructure_effort
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = industrial_effort }
		x = 0
		y = 1
		relative_position_id = industrial_effort
		cost = 10

		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2
			modifier = {
				factor = 1.2
				any_controlled_state = { infrastructure < 4 }
			}
			modifier = {
				factor = 1.2
				any_controlled_state = { infrastructure < 6 }
			}

			modifier = {
				factor = 10
				OR = {
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Full
				}
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					#has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					#has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {			
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
			}
		}

		complete_tooltip = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = infrastructure
										size > 0
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 1
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = infrastructure
										size > 1
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = infrastructure_effort_2
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = infrastructure_effort }
		x = 0
		y = 1
		relative_position_id = infrastructure_effort
		cost = 10

		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3

			modifier = {
				factor = 1.2
				any_controlled_state = { infrastructure < 4 }
			}
			modifier = {
				factor = 1.2
				any_controlled_state = { infrastructure < 6 }
			}

			modifier = {
				factor = 3
				OR = {
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Full
				}
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					#has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					#has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {			
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
			}
		}

		complete_tooltip = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = infrastructure
										size > 0
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 1
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = infrastructure
										size > 1
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}

#TODO
	focus = {
		id = infrastructure_effort_3
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = infrastructure_effort_2 }
		x = 0
		y = 1
		relative_position_id = infrastructure_effort_2
		cost = 10

		search_filters = { FOCUS_FILTER_INDUSTRY }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 1.2
				any_controlled_state = { infrastructure < 4 }
			}
			modifier = {
				factor = 1.2
				any_controlled_state = { infrastructure < 6 }
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {			
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
			}
		}

		complete_tooltip = {
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = infrastructure
										size > 0
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 1
					}
					OR = {
						is_in_home_area = yes
						NOT = {
							owner = {
								any_owned_state = {
									free_building_slots = {
										building = infrastructure
										size > 1
									}
									is_in_home_area = yes
								}
							}
						}
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}

#### TODO
	focus = {
		id = generic_scrap_meltdown
		icon = GFX_focus_focus_fra_maquis
		prerequisite = { focus = construction_effort }
		prerequisite = { focus = infrastructure_effort }
#		mutually_exclusive = { focus = generic_foreign_investors }
		x = -2
		y = 2
		relative_position_id = industrial_effort
		cost = 10
	
		search_filters = { FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_ideas = generic_scrap_meltdown

		#Removed. Trying out "production_lack_of_resource_penalty_factor" modifier.
		#	every_owned_state = {
		#		limit = {
		#			is_in_home_area = yes
		#			has_resources_amount = {
		#				resource = steel
		#				amount < 10
		#				state = PREV
		#			}
		#		}
		#		hidden_effect = {
		#			add_resource = {
		#			 	type = steel
		#				amount = 4
		#			}
		#		}
		#		custom_effect_tooltip = generic_scrap_meltdown_tt
		#	}

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					custom_effect_tooltip = fluid_c_plus_tt
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					custom_effect_tooltip = fluid_c_tt
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_foreign_investors
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = production_effort }
		prerequisite = { focus = infrastructure_effort }
#		mutually_exclusive = { focus = generic_scrap_meltdown }
		x = 2
		y = 2
		relative_position_id = industrial_effort
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4
			modifier = {
				factor = 1.5
				country_exists = GER
				ENG = { has_opinion = { target = ROOT value > 80 } } 
			}
			modifier = {
				factor = 1.5
				country_exists = GER
				FRA = { has_opinion = { target = ROOT value > 80 } } 
			}
			modifier = {
				factor = 1.5
				country_exists = GER
				USA = { has_opinion = { target = ROOT value > 80 } } 
			}
			modifier = {
				factor = 1.5
				country_exists = GER
				GER = { has_opinion = { target = ROOT value > 80 } } 
			}
			modifier = {
				factor = 1.5
				country_exists = GER
				SOV = { has_opinion = { target = ROOT value > 80 } } 
			}
			modifier = {
				factor = 0
				AND = {
					ENG = { has_opinion = { target = ROOT value < 80 } } 
					FRA = { has_opinion = { target = ROOT value < 80 } } 
					USA = { has_opinion = { target = ROOT value < 80 } } 
					GER = { has_opinion = { target = ROOT value < 80 } } 
					SOV = { has_opinion = { target = ROOT value < 80 } } 				
				}
			}
			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		bypass = {
			AND = { 
				ENG = { exists = no }
				FRA = { exists = no }
				USA = { exists = no }
				GER = { exists = no }
				SOV = { exists = no }
			}
		}

		completion_reward = {
			custom_effect_tooltip = generic_foreign_investors_tt	#Modeled after Greek Foreign Subsidies focus
			hidden_effect = {
				if = { 
					limit = { 
						country_exists = GER
						GER = { has_opinion = { target = ROOT value > 80 } } 
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = industrial_complex
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = industrial_complex
							level = 1
							instant_build = yes
						}
					}
				}
				if = { 
					limit = { 
						country_exists = FRA
						FRA = { has_opinion = { target = ROOT value > 80 } } 
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = industrial_complex
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = industrial_complex
							level = 1
							instant_build = yes
						}
					}
				}
				if = { 
					limit = { 
						country_exists = SOV
						SOV = { has_opinion = { target = ROOT value > 80 } } 
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = industrial_complex
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = industrial_complex
							level = 1
							instant_build = yes
						}
					}
				}
				if = { 
					limit = { 
						country_exists = ENG
						ENG = { has_opinion = { target = ROOT value > 80 } } 
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = industrial_complex
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = industrial_complex
							level = 1
							instant_build = yes
						}
					}
				}
				if = { 
					limit = { 
						country_exists = USA
						USA = { has_opinion = { target = ROOT value > 80 } } 
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = arms_factory
							level = 1
							instant_build = yes
						}
					}
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = industrial_complex
								size > 0
								include_locked = yes
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = industrial_complex
							level = 1
							instant_build = yes
						}
					}
				}
				#Last line for rewards
			} #End Hidden Effect bloc

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak

				# United Kingdom Bloc
				if = {
					limit = { 
						country_exists = ENG
						ENG = { has_opinion = { target = ROOT value > 80 } } 
					}
					custom_effect_tooltip = fluid_investor_ENG_tt
					hidden_effect = {
						# Start Democratic Bloc
						if = {
							limit = { has_idea = fluid_democratic_4 }
							modify_timed_idea = { idea = fluid_democratic_4 days = 365 }
						}
						else_if = {
							limit = { has_idea = fluid_democratic_3 }
							swap_ideas = {
								remove_idea = fluid_democratic_3
								add_idea 	= fluid_democratic_4
							}
							modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
						}
						else_if = {
							limit = { has_idea = fluid_democratic_2 }
							swap_ideas = {
								remove_idea = fluid_democratic_2
								add_idea 	= fluid_democratic_3
							}
							modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
						}
						else_if = {
							limit = { has_idea = fluid_democratic_1 }
							swap_ideas = {
								remove_idea = fluid_democratic_1
								add_idea 	= fluid_democratic_2
							}
							modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
						}
						else = {
							add_timed_idea = { idea = fluid_democratic_1 days = 210 }
						}
						# End Democratic Bloc
					}
				}
				# France Bloc
				if = {
					limit = { 
						country_exists = FRA
						FRA = { has_opinion = { target = ROOT value > 80 } } 
					}
					custom_effect_tooltip = fluid_investor_FRA_tt
					hidden_effect = {
						# Start Democratic Bloc
						if = {
							limit = { has_idea = fluid_democratic_4 }
							modify_timed_idea = { idea = fluid_democratic_4 days = 365 }
						}
						else_if = {
							limit = { has_idea = fluid_democratic_3 }
							swap_ideas = {
								remove_idea = fluid_democratic_3
								add_idea 	= fluid_democratic_4
							}
							modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
						}
						else_if = {
							limit = { has_idea = fluid_democratic_2 }
							swap_ideas = {
								remove_idea = fluid_democratic_2
								add_idea 	= fluid_democratic_3
							}
							modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
						}
						else_if = {
							limit = { has_idea = fluid_democratic_1 }
							swap_ideas = {
								remove_idea = fluid_democratic_1
								add_idea 	= fluid_democratic_2
							}
							modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
						}
						else = {
							add_timed_idea = { idea = fluid_democratic_1 days = 210 }
						}
						# End Democratic Bloc
					}
				}
				# USA Bloc
				if = {
					limit = { 
						country_exists = USA
						USA = { has_opinion = { target = ROOT value > 80 } } 
					}
					custom_effect_tooltip = fluid_investor_USA_tt
					hidden_effect = {
						# Start Democratic Bloc
						if = {
							limit = { has_idea = fluid_democratic_4 }
							modify_timed_idea = { idea = fluid_democratic_4 days = 365 }
						}
						else_if = {
							limit = { has_idea = fluid_democratic_3 }
							swap_ideas = {
								remove_idea = fluid_democratic_3
								add_idea 	= fluid_democratic_4
							}
							modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
						}
						else_if = {
							limit = { has_idea = fluid_democratic_2 }
							swap_ideas = {
								remove_idea = fluid_democratic_2
								add_idea 	= fluid_democratic_3
							}
							modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
						}
						else_if = {
							limit = { has_idea = fluid_democratic_1 }
							swap_ideas = {
								remove_idea = fluid_democratic_1
								add_idea 	= fluid_democratic_2
							}
							modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
						}
						else = {
							add_timed_idea = { idea = fluid_democratic_1 days = 210 }
						}
						# End Democratic Bloc
					}
				}
				# German Bloc
				if = {
					limit = { 
						country_exists = GER
						GER = { has_opinion = { target = ROOT value > 80 } } 
					}
					custom_effect_tooltip = fluid_investor_GER_tt
					hidden_effect = {
						# Start Fascism Bloc
						if = {
							limit = { has_idea = fluid_fascism_4 }
							modify_timed_idea = { idea = fluid_fascism_4 days = 365 }
						}
						else_if = {
							limit = { has_idea = fluid_fascism_3 }
							swap_ideas = {
								remove_idea = fluid_fascism_3
								add_idea 	= fluid_fascism_4
							}
							modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
						}
						else_if = {
							limit = { has_idea = fluid_fascism_2 }
							swap_ideas = {
								remove_idea = fluid_fascism_2
								add_idea 	= fluid_fascism_3
							}
							modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
						}
						else_if = {
							limit = { has_idea = fluid_fascism_1 }
							swap_ideas = {
								remove_idea = fluid_fascism_1
								add_idea 	= fluid_fascism_2
							}
							modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
						}
						else = {
							add_timed_idea = { idea = fluid_fascism_1 days = 210 }
						}
						# End Fascism Bloc
					}
				}
				# Russia Bloc
				if = {
					limit = { 
						country_exists = SOV
						SOV = { has_opinion = { target = ROOT value > 80 } } 
					}
					custom_effect_tooltip = fluid_investor_SOV_tt
					hidden_effect = {
						# Start Communism Bloc
						if = {
							limit = { has_idea = fluid_communism_4 }
							modify_timed_idea = { idea = fluid_communism_4 days = 365 }
						}
						else_if = {
							limit = { has_idea = fluid_communism_3 }
							swap_ideas = {
								remove_idea = fluid_communism_3
								add_idea 	= fluid_communism_4
							}
							modify_timed_idea = { idea = fluid_communism_4 days = 210 }
						}
						else_if = {
							limit = { has_idea = fluid_communism_2 }
							swap_ideas = {
								remove_idea = fluid_communism_2
								add_idea 	= fluid_communism_3
							}
							modify_timed_idea = { idea = fluid_communism_3 days = 210 }
						}
						else_if = {
							limit = { has_idea = fluid_communism_1 }
							swap_ideas = {
								remove_idea = fluid_communism_1
								add_idea 	= fluid_communism_2
							}
							modify_timed_idea = { idea = fluid_communism_2 days = 210 }
						}
						else = {
							add_timed_idea = { idea = fluid_communism_1 days = 210 }
						}
						# End Communism Bloc
					}
				}
			} # End Fluid Ideology Option ON Bloc

		} #End completion reward bloc
	}

#### TODO
	focus = {
		id = generic_unified_infrastructure
		icon = GFX_focus_generic_industry_3
		prerequisite = { focus = construction_effort_2 }
		prerequisite = { focus = infrastructure_effort_2 }
		x = 0
		y = 1
		relative_position_id = generic_scrap_meltdown
		cost = 30
	
		search_filters = { FOCUS_FILTER_INDUSTRY }

		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no  #See if capitulation breaks in-progress research

		ai_will_do = {
			factor = 4800	#Tier 6
			modifier = {
				factor = 1.2
				any_controlled_state = { infrastructure < 4 }
			}
			modifier = {
				factor = 1.2
				any_controlled_state = { infrastructure < 6 }
			}

			modifier = {
				factor = 1.5
				has_country_flag = AI_plan_infrastructure
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					#has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		available = {
			if = {
				limit = { num_of_civilian_factories_available_for_projects < 15 }

				set_temp_variable = { kmen_needed = num_owned_controlled_states }
				multiply_temp_variable = { kmen_needed = 3 }
				set_temp_variable = { bombs_needed = num_owned_controlled_states }
				multiply_temp_variable = { bombs_needed = 10 }

				#Needed due to lack of inclusive equal_or_greater operands.
				set_temp_variable = { compare_bombs_needed = bombs_needed }
				subtract_from_temp_variable = { compare_bombs_needed = 1 }

				custom_trigger_tooltip = {
					tooltip = generic_unified_infrastructure_prereq_men_tt
					check_variable = { manpower_k > kmen_needed }
				}
				custom_trigger_tooltip = {
					tooltip = generic_unified_infrastructure_prereq_bombs_tt
					check_variable = { manpower_k > kmen_needed }
					has_equipment = {
						artillery_equipment > var:compare_bombs_needed
					}
				}
			}
			else = {
				custom_trigger_tooltip = {
					tooltip = generic_unified_infrastructure_prereq_factory_tt
					num_of_civilian_factories_available_for_projects > 14
				}
			}
		}

		select_effect = {
			if = {
				limit = { num_of_civilian_factories_available_for_projects < 15 }

				set_temp_variable = { men_needed = num_owned_controlled_states }
				multiply_temp_variable = { men_needed = -3000 }
				set_temp_variable = { bombs_needed = num_owned_controlled_states }
				multiply_temp_variable = { bombs_needed = -10 }

				add_manpower = var:men_needed
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = var:bombs_needed
					producer = ROOT
				}
			}
			else = {
				add_timed_idea = { 
					idea = generic_infrastructure_project
					days = 140
				}
			}
		}

		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {			
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
			}
		}
		cancel_effect = {
			if = {
				limit = { num_of_civilian_factories_available_for_projects < 15 }

				set_temp_variable = { men_needed = num_owned_controlled_states }
				multiply_temp_variable = { men_needed = 3000 }
				set_temp_variable = { bombs_needed = num_owned_controlled_states }
				multiply_temp_variable = { bombs_needed = 10 }

				add_manpower = var:men_needed
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = var:bombs_needed
					producer = ROOT
				}
			}
			else = {
				remove_ideas = { generic_infrastructure_project }
			}
		}

		completion_reward = {
			set_temp_variable = { kmen_needed = num_owned_controlled_states }
			multiply_temp_variable = { kmen_needed = 3 }
			set_temp_variable = { kmen_returned = num_owned_controlled_states }
			multiply_temp_variable = { kmen_returned = 2 }
			set_temp_variable = { men_returned = num_owned_controlled_states }
			multiply_temp_variable = { men_returned = 2000 }
			set_temp_variable = { bombs_needed = num_owned_controlled_states }
			multiply_temp_variable = { bombs_needed = 10 }

			if = {
				limit = { num_of_civilian_factories_available_for_projects < 15 }
				custom_effect_tooltip = generic_unified_infrastructure_reward_tt
				hidden_effect = { add_manpower = var:men_returned }
			}
			else = {
				custom_effect_tooltip = generic_unified_infrastructure_reward2_tt
				hidden_effect { remove_ideas = { generic_infrastructure_project } }
			}

			if = {
				limit = { num_of_controlled_states < 2 }
				every_controlled_state = {
					set_building_level = {
						type = infrastructure
						level = 10
						instant_build = yes
					}
				}
			}
			else_if = {
				limit = { num_of_controlled_states < 3 }
				every_controlled_state = {
					limit = { infrastructure < 8 }
					set_building_level = {
						type = infrastructure
						level = 8
						instant_build = yes
					}
				}
			}
			else_if = {
				limit = { num_of_controlled_states < 4 }
				every_controlled_state = {
					limit = { infrastructure < 5 }
					set_building_level = {
						type = infrastructure
						level = 5
						instant_build = yes
					}
				}
				every_owned_state = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				every_owned_state = {
					limit = {
						is_controlled_by = ROOT
						infrastructure < 3
					}
					set_building_level  = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				} #End Checking for 2 Infra states
				every_owned_state = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				} #End Every state bloc
			}
			#After building infrastructure, develop the land

			#There doesn't seem to be any way to check num_of_factories at the state scope
			#The engine doesn't seem to allow double free_building_slot triggers which prohibits mathing locked/unlocked slots
			#set_state_category = best approach

			# State category table
			# Cateogry 		: Slots	: Action 					:	Alternate Names
			# enclave		: 0		: Ignore; they are military enclaves and should stay small. (e.g. Gibraltar)
			#
			# wasteland		: 0		: rural (+2 categories)
			# pastoral		: 1		: town  (+2 categories)
			# rural			: 2		: large_town (+2 categories)
			# town			: 4		: city (+2 categories)			Developed Rural Region
			# large_town	: 5		: city (+1 categories)			Sparse Urban Region
			# city			: 6		: large_city (+1 categories)	Urban Region
			# large_city	: 8		: Ignore; No need to develop	Dense Urban Region
			# metropolis	: 10	: Ignore; No need to develop
			# megalopolis	: 12	: Ignore; No need to develop
			#
			# tiny_island	: 0		: small_island (+1 categories) and +2 slots
			# small_island	: 1		: town (+2 categories)
			#
			# Must check state category in separate triggers, or everything will be made the same.
			#
			# ############ Reduced to +1 categories for continental states; take in consideration of Autarky/Subsidies foci

#### MUST order it from largest to smallest cateogry or every single province would inevitably be upgraded to top! (Sequential condition checks)
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					has_state_category = large_town
				}
				set_state_category = city
			}
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					has_state_category = town
				}
				set_state_category = large_town
			}
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					has_state_category = rural
				}
				set_state_category = town
			}
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					has_state_category = pastoral
				}
				set_state_category = rural
			}
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					has_state_category = wasteland
				}
				set_state_category = rural
			}
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					has_state_category = small_island
				}
				set_state_category = town
			}
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					has_state_category = tiny_island
				}
				set_state_category = small_island
				add_extra_state_shared_building_slots = 2
			}
			#End Every state building slot bloc

			### Configuring AI strategy
			if = {
				limit = { 
					has_war = yes
					NOT = { has_country_flag = AI_plan_DefCon1_finished }
				}
				set_country_flag = AI_plan_DefCon1
			}
			else_if {
				limit = {
					is_in_faction_with = SOV
					NOT = { has_country_flag = AI_plan_Defense_Full_finished }
				}	# To exclude TAN & MON from the next bloc
				set_country_flag = AI_plan_Defense_Full
			}
			clr_country_flag = AI_plan_infrastructure
			set_country_flag = AI_plan_infrastructure_finished


			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_c_d_tt
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
				# Start Democratic Bloc
				if = {
					limit = { has_idea = fluid_democratic_4 }
					modify_timed_idea = { idea = fluid_democratic_4 days = 180 }
					add_popularity = { ideology = democratic popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_3 }
					swap_ideas = {
						remove_idea = fluid_democratic_3
						add_idea 	= fluid_democratic_4
					}
					modify_timed_idea = { idea = fluid_democratic_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_2 }
					swap_ideas = {
						remove_idea = fluid_democratic_2
						add_idea 	= fluid_democratic_3
					}
					modify_timed_idea = { idea = fluid_democratic_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_democratic_1 }
					swap_ideas = {
						remove_idea = fluid_democratic_1
						add_idea 	= fluid_democratic_2
					}
					modify_timed_idea = { idea = fluid_democratic_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_democratic_1 days = 210 }
				}
				# End Democratic Bloc
			} # End Fluid Ideology Option ON Bloc

		} #End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_deep_mining
		icon = GFX_focus_generic_steel
		prerequisite = { focus = generic_unified_infrastructure focus = construction_effort_3 }
		x = -1
		y = 1
		relative_position_id = generic_unified_infrastructure
		cost = 10
	
		search_filters = { FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = no
#		cancel_if_invalid = no
		continue_if_invalid = yes

		ai_will_do = {
			factor = 3200	#Tier 5 via Construction III

			modifier ={
				factor = 1.5

				all_owned_state = {
					limit = { is_controlled_by = ROOT }
					has_resources_amount = { resource = steel amount < 10}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = steel		amount > 20}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = chromium	amount > 20}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = tungsten	amount > 20}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = rubber		amount > 20}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = aluminum	amount > 20}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = oil 		amount > 20}
				}
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = mobilize_army_construction_tt
				has_army_manpower = { size > 10000 }
			}
			custom_trigger_tooltip = {
				tooltip = reserve_army_construction_tt
				has_manpower > 2000
			}
			has_tech = excavation1
			has_tech = excavation2
			has_tech = excavation3
		}

		select_effect = {
			add_manpower = -2000
		}

		completion_reward = {
			custom_effect_tooltip = demobilize_reserve_army_construction_tt
			hidden_effect = { add_manpower = 2000 }
			if = {
				limit = {
					any_owned_state = {
						NOT = { has_state_flag = force_excavated }
					}
				}
				random_owned_state = {
					limit = {
						is_in_home_area = yes
						NOT = { has_state_flag = force_excavated }
					}
					add_resource = {
					 	type = steel
						amount = 30
					}
					set_state_flag = deep_mined
				}
			}
			else = {
				random_owned_state = {
					limit = { is_in_home_area = yes }
					add_resource = {
					 	type = steel
						amount = 20
					}
					set_state_flag = deep_mined
				}
			}
			custom_effect_tooltip = stacked_resource_warning_tt

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_f_n_tt
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc
		} #End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_supply_chain
		icon = GFX_goal_generic_consumer_goods
		prerequisite = { focus = generic_unified_infrastructure focus = infrastructure_effort_3 }
		x = 1
		y = 1
		relative_position_id = generic_unified_infrastructure
		cost = 10
	
		search_filters = { FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 3200	#Tier 5 via Infrastructure III

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_ideas = generic_supply_chain
		}
	}

#### TODO
	focus = {
		id = generic_force_excavation
		icon = GFX_goal_generic_construction2
		prerequisite = { focus = infrastructure_effort_2 }
		prerequisite = { focus = production_effort_2 }
		x = 0
		y = 1
		relative_position_id = generic_foreign_investors
		cost = 10
	
		search_filters = { FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = no
#		cancel_if_invalid = no
		continue_if_invalid = yes

		ai_will_do = {
			factor = 4800	#Tier 6

			modifier ={
				factor = 1.5

				all_owned_state = {
					limit = { is_controlled_by = ROOT }
					has_resources_amount = { resource = steel amount < 10}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = steel		amount > 20}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = chromium	amount > 20}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = tungsten	amount > 20}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = rubber		amount > 20}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = aluminum	amount > 20}
				}
			}
			modifier ={
				factor = 0.75
				any_owned_state = {
					limit = { is_controlled_by = ROOT }
					#We are NOT a resource-starved country
					has_resources_amount = { resource = oil 		amount > 20}
				}
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = mobilize_army_construction_tt
				has_army_manpower = { size > 10000 }
			}
			custom_trigger_tooltip = {
				tooltip = reserve_army_construction_tt
				has_manpower > 2000
			}
			has_equipment = {
				artillery_equipment > 99
			}
		}
		select_effect = {
			add_manpower = -2000
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = -100
				producer = ROOT
			}
		}

		completion_reward = {
			custom_effect_tooltip = generic_force_excavation_tt
			hidden_effect = { add_manpower = -500 }
			if = {
				limit = {
					any_owned_state = {
						NOT = { has_state_flag = deep_mined }
					}
				}
				random_owned_state = {
					limit = {
						is_in_home_area = yes
						NOT = { has_state_flag = deep_mined }
					}
					add_resource = {
					 	type = steel
						amount = 20
					}
					set_state_flag = force_excavated
				}
			}
			else = {
				random_owned_state = {
					limit = { is_in_home_area = yes }
					add_resource = {
					 	type = steel
						amount = 10
					}
					set_state_flag = force_excavated
				}
			}
			custom_effect_tooltip = stacked_resource_warning_tt

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_f_n_tt
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_defense_rollout
		icon = GFX_goal_generic_construct_military
		prerequisite = { focus = infrastructure_effort_2 }
		prerequisite = { focus = production_effort_2 }
		x = -1
		y = 1
		relative_position_id = generic_force_excavation
		cost = 20
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = no #see if capitulation breaks in-progress research
#		cancel_if_invalid = no
		continue_if_invalid = yes

		ai_will_do = {
			factor = 4800	#Tier 6

			modifier = {
				factor = 2
				has_country_flag = AI_plan_Defense_Full
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					#has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		available = {
			set_temp_variable = { kmen_needed = num_owned_controlled_states }
			multiply_temp_variable = { kmen_needed = 3 }

			custom_trigger_tooltip = {
				tooltip = generic_defense_rollout_prereq_tt
				check_variable = { manpower_k > kmen_needed }
			}
		}

		select_effect = {
			set_temp_variable = { men_needed = num_owned_controlled_states }
			multiply_temp_variable = { men_needed = -3000 }
			add_manpower = var:men_needed
		}
		cancel_effect = {
			set_temp_variable = { men_needed = num_owned_controlled_states }
			multiply_temp_variable = { men_needed = 3000 }
			add_manpower = var:men_needed
		}

		completion_reward = {
			set_temp_variable = { kmen_needed = num_owned_controlled_states }
			multiply_temp_variable = { kmen_needed = 3 }
			set_temp_variable = { men_needed = num_owned_controlled_states }
			multiply_temp_variable = { men_needed = 3000 }
			if = {
				limit = { num_of_controlled_states > 2 }
				custom_effect_tooltip = generic_defense_rollout_reward_tt
				hidden_effect = { 
					every_owned_state = {
						limit = { 
							is_controlled_by = ROOT
							any_neighbor_state = {
								NOT = { is_owned_and_controlled_by = ROOT }
							}
						}
						add_building_construction = {
							type = bunker
							level = 3
							instant_build = yes
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
						}
				#ADDS TO CONSTRUCTION QUEUE, PARTICULARLY USEFUL FOR AI
						add_building_construction = {
							type = bunker
							level = 3
							instant_build = no
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
						}
					} #End Land Fort Building bloc
					add_manpower = var:men_needed
				}
			}
			else = {
				custom_effect_tooltip = generic_defense_rollout_reward_opm_tt
				hidden_effect = { 
					every_owned_state = {
						limit = { 
							is_controlled_by = ROOT
							any_neighbor_state = {
								NOT = { is_owned_and_controlled_by = ROOT }
							}
						}
						add_building_construction = {
							type = bunker
							level = 5
							instant_build = yes
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
						}
				#ADDS TO CONSTRUCTION QUEUE, PARTICULARLY USEFUL FOR AI
						add_building_construction = {
							type = bunker
							level = 5
							instant_build = no
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
						}
					} #End Land Fort Building bloc
					add_manpower = var:men_needed
				}
			}
			### Configuring AI strategy
			if = {
				limit = { 
					has_war = yes
					NOT = { has_country_flag = AI_plan_DefCon1_finished }
				}
				set_country_flag = AI_plan_DefCon1
			}
			else_if {
				limit = {
					is_in_faction_with = SOV
					NOT = { has_country_flag = AI_plan_Defense_Full_finished }
				}	# To exclude TAN & MON from the next bloc
				set_country_flag = AI_plan_Defense_Full
			}
			else_if = {
				limit = {
					num_of_factories < 12
					NOT = { has_country_flag = AI_plan_infrastructure_finished }
				}
				set_country_flag = AI_plan_infrastructure
			}
			clr_country_flag = AI_plan_Defense_Full
			set_country_flag = AI_plan_Defense_Full_finished
			if = {
				limit = {
					NOT = { has_country_flag = AI_plan_mil_prod_finished }
					NOT = { has_completed_focus = generic_decentralization }
					NOT = { has_completed_focus = generic_land_redistribution }
				}
				set_country_flag = AI_plan_mil_prod
			}
			else_if = {
				limit = { NOT = { has_country_flag = AI_plan_WarPrep_Finished } }
				set_country_flag = AI_plan_WarPrep
			}
		} #End Reward Bloc
	}

#### TODO
	focus = {
		id = generic_mass_mfg
		icon = GFX_goal_generic_production2
		prerequisite = { focus = infrastructure_effort_3 }
		prerequisite = { focus = production_effort_3 }
		x = 0
		y = 2
		relative_position_id = generic_force_excavation
		cost = 10
	
		search_filters = { FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 5000	#Tier 8
		}

		completion_reward = {
			add_ideas = generic_mass_mfg
		}
	}

	focus = {
		id = nuclear_effort
		icon = GFX_focus_wonderweapons
		prerequisite = { focus = infrastructure_effort_3 focus = generic_unified_infrastructure }
		x = 0
		y = 2
		relative_position_id = generic_unified_infrastructure
		cost = 10
		
		search_filters = { FOCUS_FILTER_RESEARCH } 

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 3200	#Tier 5
		}

		completion_reward = {
			add_tech_bonus = {
				name = nuclear_bonus
				ahead_reduction = 2
				category = nuclear
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
				always = yes
			}
		}
	}

	focus = {
		id = extra_tech_slot
		icon = GFX_focus_research
		prerequisite = { focus = generic_unified_infrastructure focus = infrastructure_effort_3 }
		x = 0
		y = 2
		relative_position_id = infrastructure_effort_3
		cost = 10

		search_filters = { FOCUS_FILTER_RESEARCH } 
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 3200	#Tier 5 via Infrastructure III
		}

		completion_reward = {
			add_research_slot = 1
		}
	}
	
	focus = {
		id = extra_tech_slot_2
		icon = GFX_focus_research
		prerequisite = { focus = extra_tech_slot }
		available = {
			num_of_factories > 50
		}
		cancel_if_invalid = no
		continue_if_invalid = yes
		x = 0
		y = 1
		relative_position_id = extra_tech_slot
		cost = 10

		search_filters = { FOCUS_FILTER_RESEARCH } 
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 4800	#Tier 6
		}

		completion_reward = {
			add_research_slot = 1
		}
	}	

	focus = {
		id = secret_weapons
		icon = GFX_goal_generic_secret_weapon
		prerequisite = { focus = infrastructure_effort_2 }
		prerequisite = { focus = production_effort_2 }
		x = 1
		y = 1
		relative_position_id = generic_force_excavation
		cost = 10

		search_filters = { FOCUS_FILTER_RESEARCH } 
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 4800	#Tier 6
		}

		completion_reward = {
			add_tech_bonus = {
				name = secret_bonus
				bonus = 1.0
				uses = 4
				category = electronics
				category = nuclear
				category = rocketry
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
				always = yes
			}
		}
	}

### Black Budget Branch
## TODO
	focus = {
		id = generic_black_budget
		icon = GFX_focus_mex_privatisation #GFX_focus_black_budget
		#For some strange reason this specific focus would not accept any custom graphics; must be vanilla.
		x = 0
		y = 8
		relative_position_id = political_effort
#		x = 9
#		y = 0
#		relative_position_id = industrial_effort
		cost = 5
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = no
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1	#Normally Tier 1, but this entire branch isn't useful for AI

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}		}

		completion_reward = {
			#unlock_decision_category_tooltip = generic_black_budget_category
			add_political_power = 100
			custom_effect_tooltip = generic_black_budget_tt

## Focus Synergy Reward
			if = {
				limit = { has_completed_focus = generic_iron_curtain }
				custom_effect_tooltip = generic_black_budget_iron_curtain_synergy_tt
				custom_effect_tooltip = generic_iron_curtain_tldr_tt2
				hidden_effect = {
					add_tech_bonus = {
						name = tech_bonus_iron_curtain
						ahead_reduction = 5
						uses = 1
						category = infantry_weapons
						category = para_tech   #Not included in infantry tech, but mountaineer was.
						category = marine_tech #Not included in infantry tech, but mountaineer was.

						category = infantry_tech #includes motorized & mechanized
						category = support_tech
						category = artillery
						
						category = armor 
						category = air_equipment
						category = naval_equipment
			
						category = industry
						category = electronics
						category = rocketry
						category = nuclear
						category = jet_technology
					}
				}
			}

			### Configuring AI strategy
			if = {
				limit = { 
					OR = {
						has_war = yes
						tag = AUS
						tag = ALB
					}
					NOT = { has_country_flag = AI_plan_DefCon1_finished }
				}
				set_country_flag = AI_plan_DefCon1
			}
			else_if {
				limit = {
					is_in_faction_with = SOV
					NOT = { has_country_flag = AI_plan_Defense_Full_finished }
				}	# To exclude TAN & MON from the next bloc
				set_country_flag = AI_plan_Defense_Full
			}
			else_if = {
				limit = {
					OR = {
						tag = SWE #Threatned by Sea
						tag = NOR #Threatned by Sea
						any_neighbor_country = {
							OR = {
								tag = GER
								tag = SOV
								tag = ITA
							}
						}	# Deterrence!
					}
					NOT = { has_country_flag = AI_plan_Defense_Fast_finished }
				}
				set_country_flag = AI_plan_Defense_Fast
			}
			else_if = {
				limit = {
					num_of_factories < 12
					NOT = { has_country_flag = AI_plan_infrastructure_finished }
				}
				set_country_flag = AI_plan_infrastructure
			}
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_special_forces_focus
		icon = GFX_goal_generic_major_war
		prerequisite = { focus = generic_black_budget }
		mutually_exclusive = { focus = generic_intelligence_focus }
		x = -2
		y = 1
		relative_position_id = generic_black_budget
		cost = 10
		search_filters = { FOCUS_FILTER_MANPOWER }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2
		}

		completion_reward = {
			if = {
				limit = { has_idea = special_forces }
				swap_ideas = {
					remove_idea = special_forces
					add_idea = generic_special_forces_1_plus
				}
			}
			else = {
				add_ideas = generic_special_forces_1
			}
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_intelligence_focus
		icon = GFX_goal_generic_intelligence_exchange
		prerequisite = { focus = generic_black_budget }
		mutually_exclusive = { focus = generic_special_forces_focus }
		x = 0
		y = 1
		relative_position_id = generic_black_budget
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 0	#We do not want AI to spam operations triggers on the map which it doesn't benefit from nor know how to use.
		}

		completion_reward = {
			if = {
				limit = { has_intelligence_agency = no }
				create_intelligence_agency = yes
			}
			add_ideas = generic_intelligence_focus_1
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_backchannel
		icon = GFX_goal_generic_dangerous_deal
		prerequisite = { focus = generic_black_budget }
		x = 2
		y = 1
		relative_position_id = generic_black_budget
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2
		}

		completion_reward = {
			#add_ideas = generic_backchannel
			# The additional PP may be too good. Setting every country from -10 to +5 is significant enough.

			every_other_country = {
				add_opinion_modifier = {
					target = ROOT
					modifier = medium_increase
				}
			}
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_special_forces_supply
		icon = GFX_goal_generic_cavalry #GFX_goal_generic_positive_trade_relations
		prerequisite = { focus = generic_special_forces_focus }
		x = 0
		y = 1
		relative_position_id = generic_special_forces_focus
		cost = 10
		search_filters = { FOCUS_FILTER_MANPOWER }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3
		}

		completion_reward = {
			if = {
				limit = { has_idea = generic_special_forces_1_plus }
				swap_ideas = {
					remove_idea = generic_special_forces_1_plus
					add_idea = generic_special_forces_2_plus
				}
			}
			else = {
				swap_ideas = {
					remove_idea = generic_special_forces_1
					add_idea = generic_special_forces_2
				}
			}
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_battle_promotion
		icon = GFX_focus_generic_license_production
		prerequisite = { focus = generic_special_forces_supply }
		x = 0
		y = 1
		relative_position_id = generic_special_forces_supply
		cost = 10
		search_filters = { FOCUS_FILTER_MANPOWER }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4
		}

		completion_reward = {
			if = {
				limit = { has_idea = generic_special_forces_2_plus }
				swap_ideas = {
					remove_idea = generic_special_forces_2_plus
					add_idea = generic_special_forces_3_plus
				}
			}
			else = {
				swap_ideas = {
					remove_idea = generic_special_forces_2
					add_idea = generic_special_forces_3
				}
			}
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_elite_corps
		icon = GFX_goal_generic_amphibious_assault
		prerequisite = { focus = generic_battle_promotion }
		x = 0
		y = 1
		relative_position_id = generic_battle_promotion
		cost = 10
		search_filters = { FOCUS_FILTER_MANPOWER }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes
		
		ai_will_do = {
			factor = 3200	#Tier 5
		}

		allow_branch = {
			NOT = { tag = PER }
		}

		completion_reward = {
			if = {
				limit = { has_idea = generic_special_forces_3_plus }
				swap_ideas = {
					remove_idea = generic_special_forces_3_plus
					add_idea = generic_special_forces_4_plus
				}
			}
			else = {
				swap_ideas = {
					remove_idea = generic_special_forces_3
					add_idea = generic_special_forces_4
				}
			}
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_immortals
		icon = GFX_focus_RAJ_lions_of_the_great_war
		prerequisite = { focus = generic_battle_promotion }
		x = 0
		y = 1
		relative_position_id = generic_battle_promotion
		cost = 10
		search_filters = { FOCUS_FILTER_MANPOWER }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes
		
		ai_will_do = {
			factor = 3200	#Tier 5
		}

		allow_branch = {
			tag = PER
		}

		completion_reward = {
			if = {
				limit = { has_idea = generic_special_forces_3_plus }
				swap_ideas = {
					remove_idea = generic_special_forces_3_plus
					add_idea = generic_special_forces_5_plus
				}
			}
			else = {
				swap_ideas = {
					remove_idea = generic_special_forces_3
					add_idea = generic_special_forces_5
				}
			}
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_recruit_expatriates
		icon = GFX_focus_prc_infiltration
		prerequisite = { focus = generic_intelligence_focus }
		x = 0
		y = 1
		relative_position_id = generic_intelligence_focus
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = generic_intelligence_focus_1
				add_idea = generic_intelligence_focus_2
			}

			custom_effect_tooltip = generic_recruit_expatriates_tt
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_sexpionage
		icon = GFX_focus_spy_women
		prerequisite = { focus = generic_recruit_expatriates }
		x = 0
		y = 1
		relative_position_id = generic_recruit_expatriates
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = generic_intelligence_focus_2
				add_idea = generic_intelligence_focus_3
			}

			custom_effect_tooltip = generic_sexpionage_tt
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_social_engineering
		icon = GFX_goal_generic_propaganda #GFX_focus_focus_fra_revolution_utmost
		prerequisite = { focus = generic_sexpionage }
		x = 0
		y = 1
		relative_position_id = generic_sexpionage
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_FRA_POLITICAL_VIOLENCE }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 3200	#Tier 5
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = generic_intelligence_focus_3
				add_idea = generic_intelligence_focus_4
			}
			set_rule = { can_boost_other_ideologies = yes }
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_black_market
		icon = GFX_focus_eng_concessions_to_the_trade_unions
		prerequisite = { focus = generic_backchannel }
		x = 0
		y = 1
		relative_position_id = generic_backchannel
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 10	#Normally Tier 3. AI can't handle the smuggling decisions but could use the 1 extra factory.
		}

		completion_reward = {
			add_offsite_building = { type = industrial_complex level = 1 }
			custom_effect_tooltip = generic_black_market_tt
		}
	}

## TODO
	focus = {
		id = generic_arms_smuggling
		icon = GFX_focus_generic_army_tanks2
		prerequisite = { focus = generic_black_market }
		x = 0
		y = 1
		relative_position_id = generic_black_market
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 10	#Normally Tier 4. AI can't handle the smuggling decisions but could use the 1 extra factory.
		}

		completion_reward = {
			add_offsite_building = { type = arms_factory level = 1 }
			custom_effect_tooltip = generic_arms_smuggling_tt
		}
	}

## TODO
	focus = {
		id = generic_unlicensed_excavations
		icon = GFX_focus_generic_tungsten
		prerequisite = { focus = generic_arms_smuggling }
		x = 0
		y = 1
		relative_position_id = generic_arms_smuggling
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 0	#Normally Tier 5, but disabled for AI. The entire decision tree is not usable by AI.
		}

		completion_reward = {
			custom_effect_tooltip = generic_unlicensed_excavations_tt
		}
	}

### Army Branch

	focus = {
		id = army_effort
		icon = GFX_goal_generic_allies_build_infantry
		x = 7
		y = 0
		relative_position_id = generic_black_budget
		cost = 5
		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1	#Tier 1

			modifier = {
				factor = 4
				has_completed_focus = political_effort
			}
			modifier = {
				factor = 4
				has_completed_focus = industrial_effort
			}
			modifier = {
				factor = 1.5
				num_of_military_factories > 9
			}
			modifier = {
				factor = 400
				has_country_flag = AI_plan_WarPrep
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					#has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = land_doc_bonus
				bonus = 1.0
				uses = 1
				category = land_doctrine
			}
			army_experience = 25
			#Bumped from +5 Because seriously, one should be able to custom their divisions.

			### Configuring AI strategy
			if = {
				limit = { 
					OR = {
						has_war = yes
						tag = AUS
						tag = ALB
					}
					NOT = { has_country_flag = AI_plan_DefCon1_finished }
				}
				set_country_flag = AI_plan_DefCon1
			}
			else_if {
				limit = {
					is_in_faction_with = SOV
					NOT = { has_country_flag = AI_plan_Defense_Full_finished }
				}	# To exclude TAN & MON from the next bloc
				set_country_flag = AI_plan_Defense_Full
			}
			else_if = {
				limit = {
					OR = {
						tag = SWE #Threatned by Sea
						tag = NOR #Threatned by Sea
						any_neighbor_country = {
							OR = {
								tag = GER
								tag = SOV
								tag = ITA
							}
						}	# Deterrence!
					}
					NOT = { has_country_flag = AI_plan_Defense_Fast_finished }
				}
				set_country_flag = AI_plan_Defense_Fast
			}
			else_if = {
				limit = {
					num_of_factories < 12
					NOT = { has_country_flag = AI_plan_infrastructure_finished }
				}
				set_country_flag = AI_plan_infrastructure
			}
		} #End Rewards Bloc
	}

	focus = {
		id = equipment_effort
		icon = GFX_goal_generic_small_arms
		prerequisite = { focus = army_effort }
		x = -2
		y = 1
		relative_position_id = army_effort
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2

			modifier = {
				factor = 40
				has_country_flag = AI_plan_WarPrep
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					#has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = tech_bonus_equipment_effort
				bonus = 1.0
				uses = 2
				category = infantry_weapons
				category = support_tech
				category = artillery
			}
		}
	}

	focus = {
		id = equipment_effort_2
		icon = GFX_goal_generic_army_artillery
		prerequisite = { focus = equipment_effort }
		x = 0
		y = 2
		relative_position_id = equipment_effort
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3

			modifier = {
				factor = 10
				has_country_flag = AI_plan_WarPrep
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					#has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = tech_bonus_equipment_effort
				bonus = 1.0
				uses = 1
				category = support_tech
				category = artillery
			}
			add_tech_bonus = {
				name = tech_bonus_infantry_advances
				bonus = 1.0
				ahead_reduction = 2
				uses = 1
				category = infantry_weapons
			}

			### Configuring AI strategy
			if = {
				limit = { 
					has_war = yes
					NOT = { has_country_flag = AI_plan_DefCon1_finished }
				}
				set_country_flag = AI_plan_DefCon1
			}
			else_if {
				limit = {
					is_in_faction_with = SOV
					NOT = { has_country_flag = AI_plan_Defense_Full_finished }
				}	# To exclude TAN & MON from the next bloc
				set_country_flag = AI_plan_Defense_Full
			}
			else_if = {
				limit = {
					num_of_factories < 12
					NOT = { has_country_flag = AI_plan_infrastructure_finished }
				}
				set_country_flag = AI_plan_infrastructure
			}
			if = {
				limit = { has_completed_focus = generic_citizen_readiness }
				clr_country_flag = AI_plan_WarPrep
				set_country_flag = AI_plan_WarPrep_Finished
				if = {
					limit = { NOT = { has_country_flag = AI_plan_infrastructure_finished } }
					set_country_flag = AI_plan_infrastructure
				}
			}
		} # End Reward Bloc
	}

	focus = {
		id = equipment_effort_3
		icon = GFX_goal_generic_army_artillery2
		prerequisite = { focus = equipment_effort_2 }
		x = 0
		y = 2
		relative_position_id = equipment_effort_2
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = tech_bonus_artillery_effort
				bonus = 1.0
				ahead_reduction = 2
				uses = 1
				category = artillery
			}
		}
	}

	focus = {
#		id = generic_special_forces
		id = special_forces 	#Localization is reused with the National Idea name.
		icon = GFX_goal_generic_special_forces
		prerequisite = { focus = equipment_effort_2 }
		prerequisite = { focus = doctrine_effort }
		x = 0
		y = 2
		relative_position_id = doctrine_effort
		cost = 10

		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_MANPOWER }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4 via Eq Effort II
		}

		completion_reward = {

			if = {
				limit = { has_idea = generic_special_forces_1 }
				swap_ideas = {
					remove_idea = generic_special_forces_1
					add_idea = generic_special_forces_1_plus
				}
			}
			else_if = {
				limit = { has_idea = generic_special_forces_2 }
				swap_ideas = {
					remove_idea = generic_special_forces_2
					add_idea = generic_special_forces_2_plus
				}
			}
			else_if = {
				limit = { has_idea = generic_special_forces_3 }
				swap_ideas = {
					remove_idea = generic_special_forces_3
					add_idea = generic_special_forces_3_plus
				}
			}
			else_if = {
				limit = { has_idea = generic_special_forces_4 }
				swap_ideas = {
					remove_idea = generic_special_forces_4
					add_idea = generic_special_forces_4_plus
				}
			}
			else_if = {
				limit = { has_idea = generic_special_forces_5 }
				swap_ideas = {
					remove_idea = generic_special_forces_5
					add_idea = generic_special_forces_5_plus
				}
			}
			else = {
				add_ideas = special_forces #Consider potential conflict between focus & National Idea name
			}

			custom_effect_tooltip = generic_special_forces_tt
			hidden_effect = {
				add_tech_bonus = {
					name = tech_bonus_special_forces
					bonus = 1.0
					uses = 2
					technology = paratroopers
					technology = paratroopers2
					technology = paratroopers3
					technology = marines
					technology = marines2
					technology = marines3
					technology = tech_mountaineers
					technology = tech_mountaineers2
					technology = tech_mountaineers3
					technology = tech_special_forces
					technology = advanced_special_forces
					technology = extreme_environment_training
					technology = improved_special_forces
					technology = survival_training
					technology = elite_forces
				}
			}
		} #End Rewards Bloc
	}

	focus = {
		id = motorization_effort
		icon = GFX_goal_generic_army_motorized
		prerequisite = { focus = army_effort }
		bypass = { has_tech = motorised_infantry }
		x = 2
		y = 1
		relative_position_id = army_effort
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = motorized_bonus
				bonus = 3.0
				technology = motorised_infantry
			}
		}
	}

	focus = {
		id = mechanization_effort
		icon = GFX_goal_generic_build_tank
		prerequisite = { focus = motorization_effort }
		x = 0
		y = 2
		relative_position_id = motorization_effort
		cost = 10
		
		search_filters = {  FOCUS_FILTER_RESEARCH }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3
		}

		completion_reward = {
			add_tech_bonus = {
				name = motorized_bonus
				ahead_reduction = 2
				uses = 1
				category = motorized_equipment
			}
		}
	}

	focus = {
		id = armor_effort
		icon = GFX_goal_generic_army_tanks
		prerequisite = { focus = mechanization_effort }
		x = 0
		y = 2
		relative_position_id = mechanization_effort
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4
		}

		completion_reward = {
			add_tech_bonus = {
				name = armor_bonus
				bonus = 1.0
				uses = 2
				category = armor
			}
		}
	}

	focus = {
		id = doctrine_effort
		icon = GFX_goal_generic_army_doctrines
		prerequisite = { focus = equipment_effort }
		prerequisite = { focus = generic_compulsory_training }
		x = 1
		y = 1
		relative_position_id = equipment_effort
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = tech_bonus_doctrine_effort
				bonus = 1.0
				uses = 1
				category = land_doctrine
			}
			army_experience = 25
			#Bumped from +5 Because seriously, one should be able to custom their divisions.
		}
	}

	focus = {
		id = doctrine_effort_2
		icon = GFX_goal_generic_army_doctrines
		prerequisite = { focus = generic_compulsory_training }
		prerequisite = { focus = motorization_effort }
		x = -1
		y = 1
		relative_position_id = motorization_effort
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = tech_bonus_doctrine_effort
				bonus = 1.0
				uses = 1
				category = land_doctrine
			}
			army_experience = 25
			#Bumped from +5 Because seriously, one should be able to custom their divisions.
		}
	}

## TODO
	focus = {
		id = doctrine_effort_3
		icon = GFX_goal_generic_army_doctrines
		prerequisite = { focus = generic_citizen_readiness }
		prerequisite = { focus = mechanization_effort }
		x = 0
		y = 2
		relative_position_id = doctrine_effort_2
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Normally T6 but given T4 weight since its just a duplicate of Doc I & II which are both T4.

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = tech_bonus_doctrine_effort
				bonus = 1.0
				uses = 1
				category = land_doctrine
			}
			army_experience = 25
			#Bumped from +5 Because seriously, one should be able to custom their divisions.
		}
	}

## TODO
	focus = {
		id = generic_compulsory_training
		icon = GFX_goal_generic_more_territorial_claims
		prerequisite = { focus = army_effort }
		x = 0
		y = 1
		relative_position_id = army_effort
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_FRA_POLITICAL_VIOLENCE }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2

			modifier = {
				factor = 3
				has_war = yes
			}

			modifier = {
				factor = 40
				has_country_flag = AI_plan_WarPrep
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					#has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			add_ideas = generic_compulsory_training

			# Start Fluid Ideology Option ON Bloc
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				custom_effect_tooltip = linebreak
				custom_effect_tooltip = fluid_f_n_tt
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				# Start Neutrality Bloc
				if = {
					limit = { has_idea = fluid_neutralism_4 }
					modify_timed_idea = { idea = fluid_neutralism_4 days = 180 }
					add_popularity = { ideology = neutrality popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_3 }
					swap_ideas = {
						remove_idea = fluid_neutralism_3
						add_idea 	= fluid_neutralism_4
					}
					modify_timed_idea = { idea = fluid_neutralism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_2 }
					swap_ideas = {
						remove_idea = fluid_neutralism_2
						add_idea 	= fluid_neutralism_3
					}
					modify_timed_idea = { idea = fluid_neutralism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_neutralism_1 }
					swap_ideas = {
						remove_idea = fluid_neutralism_1
						add_idea 	= fluid_neutralism_2
					}
					modify_timed_idea = { idea = fluid_neutralism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_neutralism_1 days = 210 }
				}
				# End Neutrality Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_citizen_readiness
		icon = GFX_focus_generic_manpower
		prerequisite = { focus = generic_compulsory_training }
		x = 0
		y = 2
		relative_position_id = generic_compulsory_training
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3

			modifier = {
				factor = 3
				has_war = yes
			}

			modifier = {
				factor = 10
				has_country_flag = AI_plan_WarPrep
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					#has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = generic_compulsory_training
				add_idea = generic_citizen_readiness
			}

			### Configuring AI strategy
			if = {
				limit = { 
					has_war = yes
					NOT = { has_country_flag = AI_plan_DefCon1_finished }
				}
				set_country_flag = AI_plan_DefCon1
			}
			else_if {
				limit = {
					is_in_faction_with = SOV
					NOT = { has_country_flag = AI_plan_Defense_Full_finished }
				}	# To exclude TAN & MON from the next bloc
				set_country_flag = AI_plan_Defense_Full
			}
			else_if = {
				limit = {
					num_of_factories < 12
					NOT = { has_country_flag = AI_plan_infrastructure_finished }
				}
				set_country_flag = AI_plan_infrastructure
			}
			if = {
				limit = { has_completed_focus = equipment_effort_2 }
				clr_country_flag = AI_plan_WarPrep
				set_country_flag = AI_plan_WarPrep_Finished
				if = {
					limit = { NOT = { has_country_flag = AI_plan_infrastructure_finished } }
					set_country_flag = AI_plan_infrastructure
				}
			}

			# Start Fluid Ideology Option ON Bloc
			custom_effect_tooltip = fluid_c_f_tt
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc
		} #End Rewards Bloc
	}

## TODO
	focus = {
		id = generic_swiss_model
		icon = GFX_goal_generic_occupy_states_ongoing_war
		prerequisite = { focus = generic_citizen_readiness }
		x = 0
		y = 2
		relative_position_id = generic_citizen_readiness
		cost = 10
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 3
				has_war = yes
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					#has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					#has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		completion_reward = {
			swap_ideas = {
				remove_idea = generic_citizen_readiness
				add_idea = generic_swiss_model
			}

			# Start Fluid Ideology Option ON Bloc
			custom_effect_tooltip = fluid_c_f_tt
			if = {
				limit = { NOT = { has_global_flag = Disable_Fluid_Ideologies } }
				# Start Fascism Bloc
				if = {
					limit = { has_idea = fluid_fascism_4 }
					modify_timed_idea = { idea = fluid_fascism_4 days = 180 }
					add_popularity = { ideology = fascism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_3 }
					swap_ideas = {
						remove_idea = fluid_fascism_3
						add_idea 	= fluid_fascism_4
					}
					modify_timed_idea = { idea = fluid_fascism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_2 }
					swap_ideas = {
						remove_idea = fluid_fascism_2
						add_idea 	= fluid_fascism_3
					}
					modify_timed_idea = { idea = fluid_fascism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_fascism_1 }
					swap_ideas = {
						remove_idea = fluid_fascism_1
						add_idea 	= fluid_fascism_2
					}
					modify_timed_idea = { idea = fluid_fascism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_fascism_1 days = 210 }
				}
				# End Fascism Bloc
				# Start Communism Bloc
				if = {
					limit = { has_idea = fluid_communism_4 }
					modify_timed_idea = { idea = fluid_communism_4 days = 180 }
					add_popularity = { ideology = communism popularity = 0.015 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_3 }
					swap_ideas = {
						remove_idea = fluid_communism_3
						add_idea 	= fluid_communism_4
					}
					modify_timed_idea = { idea = fluid_communism_4 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_2 }
					swap_ideas = {
						remove_idea = fluid_communism_2
						add_idea 	= fluid_communism_3
					}
					modify_timed_idea = { idea = fluid_communism_3 days = 210 }
				}
				else_if = {
					limit = { has_idea = fluid_communism_1 }
					swap_ideas = {
						remove_idea = fluid_communism_1
						add_idea 	= fluid_communism_2
					}
					modify_timed_idea = { idea = fluid_communism_2 days = 210 }
				}
				else = {
					add_timed_idea = { idea = fluid_communism_1 days = 210 }
				}
				# End Communism Bloc
			} # End Fluid Ideology Option ON Bloc
		} # End Rewards Bloc
	}

### Aviation Branch

	focus = {
		id = aviation_effort
		icon = GFX_goal_generic_build_airforce
		x = 6
		y = 0
		relative_position_id = army_effort
		cost = 5
		
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1	#Normally Tier 1. Don't want to see this early game.

			modifier = {
				factor = 4
				has_completed_focus = equipment_effort_2
			}
			modifier = {
				factor = 4
				num_of_factories > 10
			}
			modifier = {
				factor = 1.5
				num_of_military_factories > 10
			}

			modifier = {
				factor = 0.2
				#AI_plan configs exist
				OR = {
					has_country_flag = AI_plan_DefCon1
					has_country_flag = AI_plan_mil_prod
					has_country_flag = AI_plan_WarPrep
					has_country_flag = AI_plan_infrastructure
					has_country_flag = AI_plan_Defense_Fast
					has_country_flag = AI_plan_Defense_Full
					has_country_flag = AI_plan_new_navy
				}
			}
		}

		complete_tooltip = {
	# This is very inaccurate after changes, but keeping legacy code for future reference. May update it later.
			if = { limit = { has_country_flag = aviation_effort_AB }
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
			}			
			add_tech_bonus = {
				name = air_doc_bonus
				bonus = 1.0
				uses = 1
				category = air_doctrine
			}			
			air_experience = 25
		}

## TODO: Try to add manpower/deployment perks to address massive manpower sink in air force
		## Actually, leave ^that^ for a separate Air Force mod.

		completion_reward = {

### Bloc 1: If no room at the capital, build randomly.
### Bloc 2: Build at the capital if there is room.

			if = {
				limit = {
					capital_scope = {
						NOT = {
							free_building_slots = {
								building = air_base
								size > 1
							}
						}
					}
				}
				if = {
				#Prioritizing existing air-bases less than size 4
					limit = {
						any_owned_state = {
							is_controlled_by = ROOT
							air_base > 0
							air_base < 2
						}
					}
					random_owned_controlled_state = {
						limit = {
							air_base > 0
							air_base < 2
						}
						add_building_construction = {
							type = air_base
							level = 4	# Buffed from 2, also distinguished from Aviation 2 & 3
							instant_build = yes
						}
						ROOT = { set_country_flag = aviation_effort_AB }
					}
				}
				else_if = {
					limit = {
						any_owned_state = {
							is_controlled_by = ROOT
							air_base > 1
							air_base < 3
						}
					}
					random_owned_controlled_state = {
						limit = {
							air_base > 1
							air_base < 3
						}
						add_building_construction = {
							type = air_base
							level = 3	# Buffed from 2, also distinguished from Aviation 2 & 3
							instant_build = yes
						}
						ROOT = { set_country_flag = aviation_effort_AB }
					}
				}
				else_if = {
					limit = {
						any_owned_state = {
							is_controlled_by = ROOT
							air_base > 2
							air_base < 4
						}
					}
					random_owned_controlled_state = {
						limit = {
							air_base > 2
							air_base < 4
						}
						add_building_construction = {
							type = air_base
							level = 2	# Buffed from 2, also distinguished from Aviation 2 & 3
							instant_build = yes
						}
						ROOT = { set_country_flag = aviation_effort_AB }
					}
				}
				else_if = {
				#If all existing air-bases are at least size 4, build a new one to size 4.
					limit = {
						any_owned_state = {
							is_controlled_by = ROOT
							air_base < 1
						}
					}
					random_owned_controlled_state = {
						limit = {
							air_base < 1
						}
						add_building_construction = {
							type = air_base
							level = 4
							instant_build = yes
						}
						ROOT = { set_country_flag = aviation_effort_AB }
					}
				}
				else = {
				#Finally, if all existing air bases are size 4 and there are no empty land, expand an existing one by 1.
					random_owned_controlled_state = {
						limit = {
							free_building_slots = {
								building = air_base
								size > 1
							}
						}
						add_building_construction = {
							type = air_base
							level = 1	# Reduced from 2 due to above checks, also distinguished from Aviation 2 & 3
							instant_build = yes
						}
						ROOT = { set_country_flag = aviation_effort_AB }
					}
				}
			}
			if = {
				limit = {
					capital_scope = {
						free_building_slots = {
							building = air_base
							size > 1
						}
					}
				}
				if = {
				#If the capital is smaller than size 5, make it 6.
					limit = { capital_scope = { air_base < 5 } }
					set_building_level = {
					    type = air_base
					    level = 6
					    instant_build = yes
					}
				}
				else = {
				#Otherwise, expand it by 2.
					capital_scope = {
						add_building_construction = {
							type = air_base
							level = 2	# Distinguished from Aviation 2 & 3 with the above check
							instant_build = yes
						}
						ROOT = { set_country_flag = aviation_effort_AB }
					}
				}
			}
			add_tech_bonus = {
				name = air_doc_bonus
				bonus = 1.0
				uses = 1
				category = air_doctrine
			}
			air_experience = 25
		
			### Configuring AI strategy
			if = {
				limit = { 
					OR = {
						has_war = yes
						tag = AUS
						tag = ALB
					}
					NOT = { has_country_flag = AI_plan_DefCon1_finished }
				}
				set_country_flag = AI_plan_DefCon1
			}
			else_if {
				limit = {
					is_in_faction_with = SOV
					NOT = { has_country_flag = AI_plan_Defense_Full_finished }
				}	# To exclude TAN & MON from the next bloc
				set_country_flag = AI_plan_Defense_Full
			}
			else_if = {
				limit = {
					OR = {
						tag = SWE #Threatned by Sea
						tag = NOR #Threatned by Sea
						any_neighbor_country = {
							OR = {
								tag = GER
								tag = SOV
								tag = ITA
							}
						}	# Deterrence!
					}
					NOT = { has_country_flag = AI_plan_Defense_Fast_finished }
				}
				set_country_flag = AI_plan_Defense_Fast
			}
			else_if = {
				limit = {
					num_of_factories < 12
					NOT = { has_country_flag = AI_plan_infrastructure_finished }
				}
				set_country_flag = AI_plan_infrastructure
			}
		} #End Rewards Bloc
	}

	focus = {
		id = fighter_focus
		icon = GFX_goal_generic_air_fighter
		prerequisite = { focus = aviation_effort }
		mutually_exclusive = { focus = bomber_focus }
		x = -1
		y = 1
		relative_position_id = aviation_effort
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2

			modifier = {
				factor = 4
				alliance_strength_ratio < 1.2
			}
		}

		completion_reward = {
			custom_effect_tooltip = generic_fighter_focus_tt
			hidden_effect = {
				add_tech_bonus = {
					name = tech_bonus_fighter_focus
					bonus = 1.0
					uses = 2
					technology = early_fighter
					technology = fighter1
					technology = fighter2
					technology = fighter3
					technology = heavy_fighter1
					technology = heavy_fighter2
					technology = heavy_fighter3
			# Why didn't they use category = light_fighter and category = cat_heavy_fighter ?
				}
			}

		} #End Rewards Bloc
	}

	focus = {
		id = bomber_focus
		icon = GFX_goal_generic_air_bomber
		prerequisite = { focus = aviation_effort }
		mutually_exclusive = { focus = fighter_focus }
		x = 1
		y = 1
		relative_position_id = aviation_effort
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2
		}

		completion_reward = {
			custom_effect_tooltip = generic_bomber_focus_tt
			hidden_effect = {
				add_tech_bonus = {
					name = tech_bonus_bomber_focus
					bonus = 1.0
					uses = 2
					technology = strategic_bomber1
					technology = strategic_bomber2
					technology = strategic_bomber3
					category = tactical_bomber
			# Why didn't they use category = cat_strategic_bomber ?
				}
			}
		} #End Rewards Bloc
	}

	focus = {
		id = CAS_effort
		icon = GFX_goal_generic_CAS
		prerequisite = { focus = fighter_focus focus = bomber_focus }
		prerequisite = { focus = motorization_effort }
		x = -1
		y = 1
		relative_position_id = aviation_effort_2
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Normally T5 but given T2 weight; Air Force priority requires extenuating circumstances for minors that uses generic tree.
		}

		completion_reward = {
			add_tech_bonus = {
				name = tech_bonus_CAS_effort
				bonus = 1.0
				ahead_reduction = 2
				uses = 1
				category = cas_bomber
			}
		}
	}

	focus = {
		id = NAV_effort
		icon = GFX_goal_generic_air_naval_bomber
		prerequisite = { focus = fighter_focus focus = bomber_focus }
		prerequisite = { focus = flexible_navy focus = large_navy }
		x = 1
		y = 1
		relative_position_id = aviation_effort_2
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Normally T5 but given T2 weight; Air Force priority requires extenuating circumstances for minors that uses generic tree.

			modifier = {
				factor = 4
				alliance_naval_strength_ratio < 1.2
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = tech_bonus_NAV_effort
				bonus = 1.0
				ahead_reduction = 2
				uses = 1
				category = naval_bomber
			}
		}
	}

	focus = {
		id = aviation_effort_2
		icon = GFX_goal_generic_air_doctrine
		prerequisite = { focus = bomber_focus focus = fighter_focus }
		x = -1
		y = 1
		relative_position_id = bomber_focus
		cost = 10

		search_filters = {   FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3
		}

		complete_tooltip = {
			if = { limit = { has_country_flag = aviation_effort_2_AB }
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
				every_owned_state = {
					if = {
						limit = { is_controlled_by = ROOT }
						add_building_construction = {
							type = anti_air_building
							level = 1
							instant_build = yes
						}				
					}
				}
			}
			add_tech_bonus = {
				name =  air_doc_bonus
				bonus = 1.0
				uses = 1
				category = air_doctrine
			}
			air_experience = 25
		}
		completion_reward = {
			if = {
			#Prioritizing existing air-bases less than size 4
				limit = {
					any_owned_state = {
						is_controlled_by = ROOT
						air_base > 0
						air_base < 2
					}
				}
				random_owned_controlled_state = {
					limit = {
						air_base > 0
						air_base < 2
					}
					add_building_construction = {
						type = air_base
						level = 4	# Buffed from 2, also distinguished from Aviation 2 & 3
						instant_build = yes
					}
					ROOT = { set_country_flag = aviation_effort_AB }
				}
			}
			else_if = {
				limit = {
					any_owned_state = {
						is_controlled_by = ROOT
						air_base > 1
						air_base < 3
					}
				}
				random_owned_controlled_state = {
					limit = {
						air_base > 1
						air_base < 3
					}
					add_building_construction = {
						type = air_base
						level = 3	# Buffed from 2, also distinguished from Aviation 2 & 3
						instant_build = yes
					}
					ROOT = { set_country_flag = aviation_effort_AB }
				}
			}
			else_if = {
				limit = {
					any_owned_state = {
						is_controlled_by = ROOT
						air_base > 2
						air_base < 4
					}
				}
				random_owned_controlled_state = {
					limit = {
						air_base > 2
						air_base < 4
					}
					add_building_construction = {
						type = air_base
						level = 2	# Buffed from 2, also distinguished from Aviation 2 & 3
						instant_build = yes
					}
					ROOT = { set_country_flag = aviation_effort_AB }
				}
			}
			#Omits the part to build a new state to size 4 compared to aviation_effort #1
			else = {
			#Finally, if all existing air bases are size 4 and there are no empty land, expand an existing one by 1.
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = air_base
							size > 1
						}
					}
					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
					ROOT = { set_country_flag = aviation_effort_AB }
				}
			}
## TODO: Check & DEBUG this!
			every_owned_state = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}				
				}
			}

			add_tech_bonus = {
				name =  air_doc_bonus
				bonus = 1.0
				uses = 1
				category = air_doctrine
			}
			air_experience = 25
		}
	}

### TODO
	focus = {
		id = aviation_effort_3
		icon = GFX_goal_generic_air_doctrine
		prerequisite = { focus = aviation_effort_2 }
		x = 0
		y = 2
		relative_position_id = aviation_effort_2
		cost = 10

		search_filters = {   FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Normally Tier 4 but given T3 weight as its a duplicate of the prereq.
		}

		complete_tooltip = {
			if = { limit = { has_country_flag = aviation_effort_2_AB }
				add_building_construction = {
					type = air_base
					level = 2
					instant_build = yes
				}
				every_owned_state = {
					if = {
						limit = { is_controlled_by = ROOT }
						add_building_construction = {
							type = anti_air_building
							level = 1
							instant_build = yes
						}				
					}
				}
			}
			add_tech_bonus = {
				name =  air_doc_bonus
				bonus = 1.0
				uses = 1
				category = air_doctrine
			}
			air_experience = 25
		}
		completion_reward = {
			if = {
			#Prioritizing existing air-bases less than size 4
				limit = {
					any_owned_state = {
						is_controlled_by = ROOT
						air_base > 0
						air_base < 2
					}
				}
				random_owned_controlled_state = {
					limit = {
						air_base > 0
						air_base < 2
					}
					add_building_construction = {
						type = air_base
						level = 4	# Buffed from 2, also distinguished from Aviation 2 & 3
						instant_build = yes
					}
					ROOT = { set_country_flag = aviation_effort_AB }
				}
			}
			else_if = {
				limit = {
					any_owned_state = {
						is_controlled_by = ROOT
						air_base > 1
						air_base < 3
					}
				}
				random_owned_controlled_state = {
					limit = {
						air_base > 1
						air_base < 3
					}
					add_building_construction = {
						type = air_base
						level = 3	# Buffed from 2, also distinguished from Aviation 2 & 3
						instant_build = yes
					}
					ROOT = { set_country_flag = aviation_effort_AB }
				}
			}
			else_if = {
				limit = {
					any_owned_state = {
						is_controlled_by = ROOT
						air_base > 2
						air_base < 4
					}
				}
				random_owned_controlled_state = {
					limit = {
						air_base > 2
						air_base < 4
					}
					add_building_construction = {
						type = air_base
						level = 2	# Buffed from 2, also distinguished from Aviation 2 & 3
						instant_build = yes
					}
					ROOT = { set_country_flag = aviation_effort_AB }
				}
			}
			#Omits the part to build a new state to size 4 compared to aviation_effort #1
			else = {
			#Finally, if all existing air bases are size 4 and there are no empty land, expand an existing one by 1.
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = air_base
							size > 1
						}
					}
					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
					ROOT = { set_country_flag = aviation_effort_AB }
				}
			}
## TODO: Check & DEBUG this!
			every_owned_state = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = anti_air_building
						level = 1
						instant_build = yes
					}				
				}
			}

			add_tech_bonus = {
				name =  air_doc_bonus
				bonus = 1.0
				uses = 1
				category = air_doctrine
			}
			air_experience = 25
		}
	}

	focus = {
		id = rocket_effort
		icon = GFX_focus_rocketry
		prerequisite = { focus = aviation_effort_3 }
#		prerequisite = { focus = infrastructure_effort } #Find a better solution. This is ugly on the chart.
		x = 0
		y = 1
		relative_position_id = aviation_effort_3
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 3200	#Tier 5
		}

		completion_reward = {
			add_tech_bonus = {
				name = jet_rocket_bonus
				ahead_reduction = 2
				uses = 2
				category = rocketry
				category = jet_technology
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
				always = yes
			}
		}
	}


### Naval Branch

	focus = {
		id = naval_effort
		icon = GFX_goal_generic_build_navy
		x = 6
		y = 0
		relative_position_id = aviation_effort
		cost = 5

		search_filters = {  FOCUS_FILTER_INDUSTRY }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1	#Normally Tier 1. Don't want to see this early game.

			modifier = {
				factor = 4
				has_completed_focus = equipment_effort_2
			}
			modifier = {
				factor = 4
				num_of_factories > 10
			}
			modifier = {
				factor = 1.5
				num_of_military_factories > 10
			}

			modifier = {
				factor = 300

				AND = {
					all_owned_state = { is_coastal = no }				
					any_controlled_state = {
						is_coastal = yes
						NOT = { is_owned_by = ROOT }
					}
				}
			#Controlling a coastal not owned by them would mean they are a successful conquerer and should build the navy ASAP.
			}
		}

		available = {
			any_state = {
				is_coastal = yes
				is_controlled_by = ROOT
			}
		}

		complete_tooltip = {
			add_extra_state_shared_building_slots = 3
			add_building_construction = {
				type = dockyard
				level = 3
				instant_build = yes
			}
			navy_experience = 25
		}
		
		completion_reward = {
			navy_experience = 25

			custom_effect_tooltip = naval_effort_basic_tech_tt
			hidden_effect = {
				if = {
					limit = { NOT = { has_tech = basic_battery } }
					set_technology = { basic_battery = 1 }
				}
				if = {
					limit = { NOT = { has_tech = basic_secondary_battery } }
					set_technology = { basic_secondary_battery = 1 }
				}
				if = {
					limit = { NOT = { has_tech = basic_torpedo } }
					set_technology = { basic_torpedo = 1 }
				}
				if = {
					limit = { NOT = { has_tech = early_ship_hull_submarine } }
					set_technology = { early_ship_hull_submarine = 1 }
					set_country_flag = no_submarines
				}
				if = {
					limit = { NOT = { has_tech = early_ship_hull_light } }
					set_technology = { early_ship_hull_light = 1 }
					set_country_flag = no_destroyers
				}
				if = {
					limit = { NOT = { has_tech = early_ship_hull_cruiser } }
					set_technology = { early_ship_hull_cruiser = 1 }
					set_country_flag = no_cruisers
				}
				if = {
					limit = { NOT = { has_tech = early_ship_hull_heavy } }
					set_technology = { early_ship_hull_heavy = 1 }
					set_country_flag = no_battleships
				}
				if = {
					limit = { NOT = { has_tech = early_ship_hull_carrier } }
					set_technology = { early_ship_hull_carrier = 1 }
					set_country_flag = no_carriers
				}
			}
### Vanilla code, Building Dockyards. 
####### Bloc 1 is preferring OWNED+CONTROLLED WITHOUT dockyards on coast.
####### Bloc 2 is omitting coastline check (why?) for OWNED+CONTROLLED state WITH existing dockyards.
####### Bloc 3 is finding a new spot in any UNOWNED but CONTROLLED state regardless of dockyards.
			if = {
				limit = {
					NOT = {
						any_owned_state = {
							dockyard > 0
							free_building_slots = {
								building = dockyard
								size > 2
								include_locked = yes
							}
						}
					}
					any_owned_state = {
						is_coastal = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_coastal = yes
						free_building_slots = {
							building = dockyard
							size > 2
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = dockyard
						level = 3
						instant_build = yes
					}
				}
				set_country_flag = naval_effort_built
			}
			if = {
				limit = {
					NOT = { has_country_flag = naval_effort_built }
					any_owned_state = {
						dockyard > 0
						free_building_slots = {
							building = dockyard
							size > 2
							include_locked = yes
						}
					}
				}
				random_owned_controlled_state = {
					limit = {
						dockyard > 0
						free_building_slots = {
							building = dockyard
							size > 2
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = dockyard
						level = 3
						instant_build = yes
					}
				}
				set_country_flag = naval_effort_built
			}
			if = {
				limit = {
					NOT = { has_country_flag = naval_effort_built }
					NOT = {
						any_owned_state = {
							free_building_slots = {
								building = dockyard
								size > 2
								include_locked = yes
							}
						}
					}
				}
				random_state = {
					limit = {
						controller = { tag = ROOT }
						free_building_slots = {
							building = dockyard
							size > 2
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = dockyard
						level = 3
						instant_build = yes
					}
				}
			} # End building Dockyards
### Unfortunately, it is impossible to build a naval base in a single province due to lack of a proper province scope. Devs confirmed there never will be a province scope due to performance issues. Leaving Naval Base upgrades to "Naval Base Effort" focus for ALL existing naval bases instead.

### Configuring AI plan
			if = {
				limit = {				
					all_owned_state = { is_coastal = no }				
					any_controlled_state = {
						is_coastal = yes
						NOT = { is_owned_by = ROOT }
					}
				}
				set_country_flag = AI_plan_new_navy
			}

		} #End Rewards Bloc
	}

	focus = {
		id = flexible_navy
		icon = GFX_goal_generic_navy_cruiser #GFX_goal_generic_navy_anti_submarine
		prerequisite = { focus = naval_effort }
		mutually_exclusive = { focus = large_navy }
		x = -2
		y = 1
		relative_position_id = naval_effort
		cost = 10
		
		search_filters = {  FOCUS_FILTER_RESEARCH }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2

			modifier = {
				factor = 2
				num_of_factories < 50
			}

			modifier = {
				factor = 2
				alliance_naval_strength_ratio < 1.2
			}

			modifier = {
				factor = 10
				has_country_flag = AI_plan_new_navy
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				all_owned_state = {
					OR = {
						is_coastal = no
						dockyard < 1
					}
				}
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = tech_bonus_flexible_navy
				bonus = 1.5
				uses = 2
				category = cat_base_strike
				category = cat_trade_interdiction
			}
			navy_experience = 25
		}
	}

	focus = {
		id = large_navy
		icon = GFX_goal_generic_navy_carrier
		prerequisite = { focus = naval_effort }
		mutually_exclusive = { focus = flexible_navy }
		x = 0
		y = 1
		relative_position_id = naval_effort
		cost = 10
		
		search_filters = {   FOCUS_FILTER_RESEARCH }

		available_if_capitulated = yes

		ai_will_do = {
			factor = 200	#Tier 2

			modifier = {
				factor = 10
				has_country_flag = AI_plan_new_navy
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				all_owned_state = {
					OR = {
						is_coastal = no
						dockyard < 1
					}
				}
			}
		}

		completion_reward = {
			add_tech_bonus = {
				name = tech_bonus_large_navy
				bonus = 1.5
				uses = 2
				category = fleet_in_being_tree
			}
			navy_experience = 25
		}
	}

	focus = {
		id = submarine_effort
		icon = GFX_goal_generic_navy_submarine
		prerequisite = { focus = flexible_navy focus = large_navy }
		x = 0
		y = 2
		relative_position_id = flexible_navy
		cost = 10
		
		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3

			modifier = {
				factor = 5
				has_country_flag = AI_plan_new_navy
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				all_owned_state = {
					OR = {
						is_coastal = no
						dockyard < 1
					}
				}
			}
		}

		completion_reward = {
			if = {
				limit = { date < 1934.7.1 }
				add_tech_bonus = {
					name = tech_bonus_submarine
					bonus = 1.0
					ahead_reduction = 2
					uses = 1
					category = ss_tech
				}
			}
			else_if = {
				limit = { date < 1938.7.1 }
				add_tech_bonus = {
					name = tech_bonus_submarine
					bonus = 1.0
					uses = 1
					category = ss_tech
				}
				add_tech_bonus = {
					name = tech_bonus_submarine
					bonus = 1.0
					ahead_reduction = 2
					uses = 1
					category = ss_tech
				}
			}
			else_if = {
				limit = { date < 1943.7.1 }
				add_tech_bonus = {
					name = tech_bonus_submarine
					bonus = 1.0
					uses = 2
					category = ss_tech
				}
				add_tech_bonus = {
					name = tech_bonus_submarine
					bonus = 1.0
					ahead_reduction = 2
					uses = 1
					category = ss_tech
				}
			}
			else = {
				add_tech_bonus = {
					name = tech_bonus_submarine
					bonus = 1.00
					uses = 3
					category = ss_tech
				}
			}
			
			if = {
				limit = { NOT = { has_completed_focus = naval_effort } }
				custom_effect_tooltip = need_naval_effort_tt
			}
			else_if = {
				limit = { has_country_flag = no_submarines }
				custom_effect_tooltip = new_basic_submarine_tt
				hidden_effect = {
					create_equipment_variant = {
						name = "Raider Class"
						type = ship_hull_submarine_1
						parent_version = 0
						modules = {
							fixed_ship_torpedo_slot = ship_torpedo_sub_1
							fixed_ship_engine_slot = sub_ship_engine_1
							rear_1_custom_slot = ship_torpedo_sub_1
						}
					}

					add_equipment_production = {
						equipment = {
							type = ship_hull_submarine_1
							creator = ROOT
							version_name = "Raider Class"
						}
						requested_factories = 1
						progress = 0.75
						amount = 1
					}
				}
			}
			else = { navy_experience = 25 }
		} #End Rewards Bloc
	}

	focus = {
		id = cruiser_effort
		icon = GFX_focus_generic_cruiser2 #GFX_goal_generic_navy_cruiser
		prerequisite = { focus = large_navy focus = flexible_navy }
		x = 0
		y = 2
		relative_position_id = large_navy
		cost = 10
		
		search_filters = {  FOCUS_FILTER_RESEARCH }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3

			modifier = {
				factor = 5
				has_country_flag = AI_plan_new_navy
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				all_owned_state = {
					OR = {
						is_coastal = no
						dockyard < 1
					}
				}
			}
		}

		completion_reward = {

			if = {
				limit = { date < 1934.7.1 }
				add_tech_bonus = {
					name = tech_bonus_cruiser
					bonus = 1.0
					ahead_reduction = 2
					uses = 1
					category = cl_tech
					category = ca_tech
				}
			}
			else_if = {
				limit = { date < 1938.7.1 }
				add_tech_bonus = {
					name = tech_bonus_cruiser
					bonus = 1.0
					uses = 1
					category = cl_tech
					category = ca_tech
				}
				add_tech_bonus = {
					name = tech_bonus_cruiser
					bonus = 1.0
					ahead_reduction = 2
					uses = 1
					category = cl_tech
					category = ca_tech
				}
			}
			else_if = {
				limit = { date < 1943.7.1 }
				add_tech_bonus = {
					name = tech_bonus_cruiser
					bonus = 1.0
					uses = 2
					category = cl_tech
					category = ca_tech
				}
				add_tech_bonus = {
					name = tech_bonus_cruiser
					bonus = 1.0
					ahead_reduction = 2
					uses = 1
					category = cl_tech
					category = ca_tech
				}
			}
			else = {
				add_tech_bonus = {
					name = tech_bonus_cruiser
					bonus = 1.00
					uses = 3
					category = cl_tech
					category = ca_tech
				}
			}

			if = {
				limit = { NOT = { has_completed_focus = naval_effort } }
				custom_effect_tooltip = need_naval_effort_tt
			}
			else_if = {
				limit = { has_country_flag = no_cruisers }
				custom_effect_tooltip = new_basic_cruiser_tt
				hidden_effect = {
					create_equipment_variant = {
						name = "Huntress Class"
						type = ship_hull_cruiser_1
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_medium_battery_1
							fixed_ship_engine_slot = cruiser_ship_engine_1
							fixed_ship_secondaries_slot = ship_secondaries_1
							fixed_ship_armor_slot = ship_armor_cruiser_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							mid_1_custom_slot = ship_light_medium_battery_1
							mid_2_custom_slot = ship_torpedo_1
							rear_1_custom_slot = ship_airplane_launcher_1
						}
					}

					add_equipment_production = {
						equipment = {
							type = ship_hull_cruiser_1
							creator = ROOT
							version_name = "Huntress Class"
						}
						requested_factories = 1
						progress = 0.75
						amount = 1
					}
				}
			}
			else = { navy_experience = 25 }

		} #End Rewards Bloc
	}

	focus = {
		id = destroyer_effort
		icon = GFX_focus_generic_destroyer
		prerequisite = { focus = submarine_effort }
		x = 0
		y = 2
		relative_position_id = submarine_effort
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 3
				has_country_flag = AI_plan_new_navy
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				all_owned_state = {
					OR = {
						is_coastal = no
						dockyard < 1
					}
				}
			}
		}

		completion_reward = {
			if = {
				limit = { date < 1934.7.1 }
				add_tech_bonus = {
					name = tech_bonus_destroyer
					bonus = 1.0
					ahead_reduction = 2
					uses = 1
					category = dd_tech
				}
			}
			else_if = {
				limit = { date < 1938.7.1 }
				add_tech_bonus = {
					name = tech_bonus_destroyer
					bonus = 1.0
					uses = 1
					category = dd_tech
				}
				add_tech_bonus = {
					name = tech_bonus_destroyer
					bonus = 1.0
					ahead_reduction = 2
					uses = 1
					category = dd_tech
				}
			}
			else_if = {
				limit = { date < 1943.7.1 }
				add_tech_bonus = {
					name = tech_bonus_destroyer
					bonus = 1.0
					uses = 2
					category = dd_tech
				}
				add_tech_bonus = {
					name = tech_bonus_destroyer
					bonus = 1.0
					ahead_reduction = 2
					uses = 1
					category = dd_tech
				}
			}
			else = {
				add_tech_bonus = {
					name = tech_bonus_destroyer
					bonus = 1.00
					uses = 3
					category = dd_tech
				}
			}

			if = {
				limit = { NOT = { has_completed_focus = naval_effort } }
				custom_effect_tooltip = need_naval_effort_tt
			}
			else_if = {
				limit = { has_country_flag = no_destroyers }
				custom_effect_tooltip = new_basic_destroyer_tt
				hidden_effect = {
					create_equipment_variant = {
						name = "Sentinel Class"
						type = ship_hull_light_1
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_light_battery_1
							fixed_ship_engine_slot = light_ship_engine_1
							fixed_ship_torpedo_slot = ship_torpedo_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							mid_1_custom_slot = ship_torpedo_1
							rear_1_custom_slot = ship_torpedo_1
						}
					}

					add_equipment_production = {
						equipment = {
							type = ship_hull_light_1
							creator = ROOT
							version_name = "Sentinel Class"
						}
						requested_factories = 1
						progress = 0.75
						amount = 1
					}
				}
			}
			else = { navy_experience = 25 }

		} #End Rewards Bloc
	}

	focus = {
		id = capital_ships_effort
		icon = GFX_goal_generic_navy_battleship
		prerequisite = { focus = cruiser_effort }
		x = 0
		y = 2
		relative_position_id = cruiser_effort
		cost = 10

		search_filters = {  FOCUS_FILTER_RESEARCH }
		
		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			modifier = {
				factor = 3
				has_country_flag = AI_plan_new_navy
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				all_owned_state = {
					OR = {
						is_coastal = no
						dockyard < 1
					}
				}
			}
		}

		completion_reward = {

			if = {
				limit = { date < 1934.7.1 }
				add_tech_bonus = {
					name = tech_bonus_capital
					bonus = 1.0
					ahead_reduction = 2
					uses = 2
					category = bc_tech
					category = bb_tech
					category = cv_tech
				}
			}
			else_if = {
				limit = { date < 1938.7.1 }
				add_tech_bonus = {
					name = tech_bonus_capital
					bonus = 1.0
					uses = 2
					category = bc_tech
					category = bb_tech
					category = cv_tech
				}
				add_tech_bonus = {
					name = tech_bonus_capital
					bonus = 1.0
					ahead_reduction = 2
					uses = 2
					category = bc_tech
					category = bb_tech
					category = cv_tech
				}
			}
			else_if = {
				limit = { date < 1943.7.1 }
				add_tech_bonus = {
					name = tech_bonus_capital
					bonus = 1.0
					uses = 4
					category = bc_tech
					category = bb_tech
					category = cv_tech
				}
				add_tech_bonus = {
					name = tech_bonus_capital
					bonus = 1.0
					ahead_reduction = 2
					uses = 2
					category = bc_tech
					category = bb_tech
					category = cv_tech
				}
			}
			else = {
				add_tech_bonus = {
					name = tech_bonus_capital
					bonus = 1.00
					uses = 6
					category = bc_tech
					category = bb_tech
					category = cv_tech
				}
			}

			if = {
				limit = { NOT = { has_completed_focus = naval_effort } }
				custom_effect_tooltip = need_naval_effort_tt
			}
			else_if = {
				limit = { has_country_flag = no_battleships }
				custom_effect_tooltip = new_basic_battleship_tt
				hidden_effect = {
					create_equipment_variant = {
						name = "Enterprise Class"
						type = ship_hull_heavy_1
						parent_version = 0
						modules = {
							fixed_ship_battery_slot = ship_heavy_battery_1
							fixed_ship_engine_slot = heavy_ship_engine_1
							fixed_ship_secondaries_slot = ship_secondaries_1
							fixed_ship_armor_slot = ship_armor_bb_1
							fixed_ship_fire_control_system_slot = ship_fire_control_system_0
							front_1_custom_slot = ship_heavy_battery_1
							mid_1_custom_slot = ship_airplane_launcher_1
							mid_2_custom_slot = ship_secondaries_1
							rear_1_custom_slot = ship_heavy_battery_1
						}
					}

					add_equipment_production = {
						equipment = {
							type = ship_hull_heavy_1
							creator = ROOT
							version_name = "Enterprise Class"
						}
						requested_factories = 1
						progress = 0.75
						amount = 1
					}
				}
			}
			else = { navy_experience = 25 }

		} #End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_navy_modernization_1
		icon = GFX_goal_generic_navy_doctrines_tactics
		prerequisite = { focus = large_navy focus = flexible_navy }
		x = -1
		y = 1
		relative_position_id = large_navy
		cost = 10
	
		search_filters = { FOCUS_FILTER_RESEARCH }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3

			modifier = {
				factor = 3
				has_country_flag = AI_plan_new_navy
			}
		}

		completion_reward = {
			custom_effect_tooltip = navy_modernization
			hidden_effect = {
				add_tech_bonus = {
					name = tech_bonus_navy_modernization
					bonus = 1.0
					uses = 5 #Reduce to 3 if using 3 Naval Modernization focuses REMEMBER TO UPDATE CUSTOM TOOLTIP LOCALIZATION
					#category = naval_equipment
			#### Using the following to exclude ship tech and focus on actual equipment only.
					category = tp_tech #transport tech, not torpedoes
					category = naval_mines
					category = asw_tech
					category = naval_minesweeping
					category = naval_minelaying
					technology = basic_cruiser_armor_scheme
					technology = improved_cruiser_armor_scheme
					technology = advanced_cruiser_armor_scheme
					technology = basic_heavy_armor_scheme
					technology = improved_heavy_armor_scheme
					technology = magnetic_detonator
					technology = homing_torpedo
					technology = electric_torpedo
					technology = improved_ship_torpedo_launcher
					technology = advanced_ship_torpedo_launcher
					technology = modern_ship_torpedo_launcher
					technology = basic_submarine_snorkel
					technology = improved_submarine_snorkel
					technology = basic_battery
					technology = basic_light_battery
					technology = improved_light_battery
					technology = advanced_light_battery
					technology = basic_light_shell
					technology = improved_light_shell
					technology = basic_medium_battery
					technology = improved_medium_battery
					technology = advanced_medium_battery
					technology = basic_medium_shell
					technology = improved_medium_shell
					technology = basic_heavy_battery
					technology = improved_heavy_battery
					technology = advanced_heavy_battery
					technology = basic_heavy_shell
					technology = improved_heavy_shell
					technology = basic_secondary_battery
					technology = improved_secondary_battery
					technology = dp_secondary_battery
					technology = damage_control_1
					technology = damage_control_2
					technology = damage_control_3
					technology = fire_control_methods_1
					technology = fire_control_methods_2
					technology = fire_control_methods_3
				}
			}
			add_tech_bonus = {
				name = tech_bonus_navy_modernization
				bonus = 1.0
				uses = 1
				category = naval_doctrine
			}
			navy_experience = 25
		}
	}

#### TODO
	focus = {
		id = generic_navy_modernization_2
		icon = GFX_goal_generic_navy_doctrines_tactics
		prerequisite = { focus = generic_navy_modernization_1 }
		x = 0
		y = 2
		relative_position_id = generic_navy_modernization_1
		cost = 10
	
		search_filters = { FOCUS_FILTER_RESEARCH }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Normally T4 but weighted Tier 3 since its a duplicate of prereq.

			modifier = {
				factor = 3
				has_country_flag = AI_plan_new_navy
			}
		}

		completion_reward = {
			custom_effect_tooltip = navy_modernization
			hidden_effect = {
				add_tech_bonus = {
					name = tech_bonus_navy_modernization
					bonus = 1.0
					uses = 5 #Reduce to 3 if using 3 Naval Modernization focuses. REMEMBER TO UPDATE CUSTOM TOOLTIP LOCALIZATION
					#category = naval_equipment
			#### Using the following to exclude ship tech and focus on actual equipment only.
					category = tp_tech #transport tech, not torpedoes
					category = naval_mines
					category = asw_tech
					category = naval_minesweeping
					category = naval_minelaying
					technology = basic_cruiser_armor_scheme
					technology = improved_cruiser_armor_scheme
					technology = advanced_cruiser_armor_scheme
					technology = basic_heavy_armor_scheme
					technology = improved_heavy_armor_scheme
					technology = magnetic_detonator
					technology = homing_torpedo
					technology = electric_torpedo
					technology = improved_ship_torpedo_launcher
					technology = advanced_ship_torpedo_launcher
					technology = modern_ship_torpedo_launcher
					technology = basic_submarine_snorkel
					technology = improved_submarine_snorkel
					technology = basic_battery
					technology = basic_light_battery
					technology = improved_light_battery
					technology = advanced_light_battery
					technology = basic_light_shell
					technology = improved_light_shell
					technology = basic_medium_battery
					technology = improved_medium_battery
					technology = advanced_medium_battery
					technology = basic_medium_shell
					technology = improved_medium_shell
					technology = basic_heavy_battery
					technology = improved_heavy_battery
					technology = advanced_heavy_battery
					technology = basic_heavy_shell
					technology = improved_heavy_shell
					technology = basic_secondary_battery
					technology = improved_secondary_battery
					technology = dp_secondary_battery
					technology = damage_control_1
					technology = damage_control_2
					technology = damage_control_3
					technology = fire_control_methods_1
					technology = fire_control_methods_2
					technology = fire_control_methods_3
				}
			}
			add_tech_bonus = {
				name = tech_bonus_navy_modernization
				bonus = 1.0
				uses = 1
				category = naval_doctrine
			}
			navy_experience = 25
		}
	}

# #### TODO
# 	focus = {
# 		id = generic_navy_modernization_3
# 		icon = GFX_goal_generic_navy_doctrines_tactics
# 		prerequisite = { focus = generic_navy_modernization_2 }
# 		x = 0
# 		y = 2
# 		relative_position_id = generic_navy_modernization_2
# 		cost = 10
	
# 		search_filters = { FOCUS_FILTER_RESEARCH }

# 		available_if_capitulated = yes
# #		cancel_if_invalid = no
# #		continue_if_invalid = yes


# 		completion_reward = {
# 			custom_effect_tooltip = navy_modernization
# 			hidden_effect = {
# 				add_tech_bonus = {
# 					name = tech_bonus_navy_modernization
# 					bonus = 1.0
# 					uses = 3
# 					#category = naval_equipment
# 			#### Using the following to exclude ship tech and focus on actual equipment only.
# 					category = tp_tech #transport tech, not torpedoes
# 					category = naval_mines
# 					category = asw_tech
# 					category = naval_minesweeping
# 					category = naval_minelaying
# 					technology = basic_cruiser_armor_scheme
# 					technology = improved_cruiser_armor_scheme
# 					technology = advanced_cruiser_armor_scheme
# 					technology = basic_heavy_armor_scheme
# 					technology = improved_heavy_armor_scheme
# 					technology = magnetic_detonator
# 					technology = homing_torpedo
# 					technology = electric_torpedo
# 					technology = improved_ship_torpedo_launcher
# 					technology = advanced_ship_torpedo_launcher
# 					technology = modern_ship_torpedo_launcher
# 					technology = basic_submarine_snorkel
# 					technology = improved_submarine_snorkel
# 					technology = basic_battery
# 					technology = basic_light_battery
# 					technology = improved_light_battery
# 					technology = advanced_light_battery
# 					technology = basic_light_shell
# 					technology = improved_light_shell
# 					technology = basic_medium_battery
# 					technology = improved_medium_battery
# 					technology = advanced_medium_battery
# 					technology = basic_medium_shell
# 					technology = improved_medium_shell
# 					technology = basic_heavy_battery
# 					technology = improved_heavy_battery
# 					technology = advanced_heavy_battery
# 					technology = basic_heavy_shell
# 					technology = improved_heavy_shell
# 					technology = basic_secondary_battery
# 					technology = improved_secondary_battery
# 					technology = dp_secondary_battery
# 					technology = damage_control_1
# 					technology = damage_control_2
# 					technology = damage_control_3
# 					technology = fire_control_methods_1
# 					technology = fire_control_methods_2
# 					technology = fire_control_methods_3
# 				}
# 			}
# 			add_tech_bonus = {
# 				name = tech_bonus_navy_modernization
# 				bonus = 1.0
# 				uses = 1
# 				category = naval_doctrine
# 			}
# 			navy_experience = 25
# 		}
# 	}


#### TODO
	focus = {
		id = generic_expanded_dockyards
		icon = GFX_goal_generic_construct_naval_dockyard
		prerequisite = { focus = naval_effort }
		x = 2
		y = 1
		relative_position_id = naval_effort
		cost = 10
	
		search_filters = { FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 200	#Tier 2

			modifier = {
				factor = 10
				has_country_flag = AI_plan_new_navy
			}
		}

		available = {
			any_state = {
				is_coastal = yes
				is_controlled_by = ROOT
			}
		}

		completion_reward = {
			if = {	# Prefer an owned state without dockyards
				limit = { 
					any_owned_state = {
						is_coastal = yes
						dockyard < 1
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_coastal = yes
						dockyard < 1
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
				}
			}
			else = { # Otherwise build in an owned state with existing dockyards
				random_owned_controlled_state = {
					limit = {
						dockyard > 0
						free_building_slots = {
							building = dockyard
							size > 0
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}

			random_state = { #After the first build set, then pick any controlled state to build more.
				limit = {
					controller = { tag = ROOT }
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			} # End building Dockyards
		} # End Rewards Bloc
	}

#### TODO
	focus = {
		id = generic_naval_base_effort
		icon = GFX_focus_coastal_fort
		prerequisite = { focus = generic_expanded_dockyards }
		x = 0
		y = 1
		relative_position_id = generic_expanded_dockyards
		cost = 10
	
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 800	#Tier 3

			modifier = {
				factor = 10
				has_country_flag = AI_plan_new_navy
			}
		}

		available = {
			any_state = {
				is_coastal = yes
				is_controlled_by = ROOT
			}
		}

		completion_reward = {
			custom_effect_tooltip = generic_naval_base_effort_tt
			custom_effect_tooltip = generic_naval_base_effort_tt2
			hidden_effect = {
				every_owned_state = {
					limit = { 
						is_controlled_by = ROOT
						is_coastal = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_coastal = yes
						}
					}
				} #End Fortify Coasts bloc
				every_owned_state = {
					limit = { 
						is_controlled_by = ROOT
						is_coastal = yes
					}
					add_building_construction = {
						type = coastal_bunker
						level = 2
						instant_build = yes
						province = {
							all_provinces = yes
							limit_to_naval_base  = yes
						}
					}
				} #End Fortify Naval Bases bloc
			}
		}
	}

#### TODO
	focus = {
		id = generic_oil_platforms
		icon = GFX_goal_generic_oil_refinery
		prerequisite = { focus = generic_naval_base_effort }
		x = 0
		y = 1
		relative_position_id = generic_naval_base_effort
		cost = 10
	
		search_filters = { FOCUS_FILTER_INDUSTRY }

		available_if_capitulated = yes
#		cancel_if_invalid = no
#		continue_if_invalid = yes

		ai_will_do = {
			factor = 1600	#Tier 4

			all_owned_state = {
				limit = { is_controlled_by = ROOT }
				has_resources_amount = { resource = oil amount < 10}
			}
		}

		available = {
			any_state = {
				is_coastal = yes
				is_controlled_by = ROOT
			}
		}

		bypass = {
			any_owned_state = {
				is_controlled_by = ROOT
				has_resources_amount = {
					resource = oil
					amount > 19
				}
			}
		}

		completion_reward = {
			set_temp_variable = { num_oil = random }
			multiply_temp_variable = { num_oil = 100 }
			set_temp_variable = { rfactor = random }
			multiply_temp_variable = { rfactor = 10 }
			round_temp_variable = rfactor

			# For some reason randomize_temp_variable is not working at all. Emulating binomial. 17-73.

			if = { limit = { check_variable = { num_oil < 17 } } 
				add_to_temp_variable = { num_oil = 17 }
			}
			else_if = { limit = { check_variable = { num_oil > 73 } } 
				subtract_from_temp_variable = { num_oil = 27 }
			}
			if = { limit { check_variable = { num_oil < 45 }  }
				add_to_temp_variable = { num_oil = rfactor }
			}
			else = {
				subtract_from_temp_variable = { num_oil = rfactor }
			}

			# End emulation.

			if = {
				limit = { 
					any_owned_state = {
						is_coastal = yes
						is_controlled_by = ROOT
						naval_base > 0
					}
				}
				random_owned_controlled_state = {
					limit = { naval_base > 0 }
					#hidden_effect = {
						add_resource = {
							type = oil
							amount = var:num_oil
						}
					#}
					#custom_effect_tooltip = generic_oil_platforms_tt
					set_state_flag = offshore_drilling
				}				
			} # End IF bloc.
			else = {
				random_controlled_state = {
					limit = { is_coastal = yes }
					#hidden_effect = {
						add_resource = {
							type = oil
							amount = var:num_oil
						}
					#}
					#custom_effect_tooltip = generic_oil_platforms_tt
					set_state_flag = offshore_drilling
				}
			}
		} # End Reward Bloc
	} # End Focus Bloc

}
