wfc_instantiate_province = {
	custom_effect_tooltip = wfc_instantiate_province_tt
	hidden_effect = {
		if = {
			# Если нет
			limit = {
				var:country_to_initiate = {
					exists = no
				}
			}
			if = {
				limit = {
					original_tag = ACW
				}
				var:country_to_initiate = {
					set_country_flag = acw_federation_subject_flag
				}
			}
			else_if = {
				limit = {
					original_tag = HEN
				}
				var:country_to_initiate = {
					set_country_flag = hen_federation_subject_flag
				}
			}
			else_if = {
				limit = {
					original_tag = MAH
				}
				var:country_to_initiate = {
					set_country_flag = mah_federation_subject_flag
				}
			}
			else_if = {
				limit = {
					original_tag = MEH
				}
				var:country_to_initiate = {
					set_country_flag = meh_federation_subject_flag
				}
			}
			else_if = {
				limit = {
					original_tag = MMS
				}
				var:country_to_initiate = {
					set_country_flag = mms_federation_subject_flag
				}
			}
			else = {
				var:country_to_initiate = {
					set_country_flag = trp_federation_subject_flag
				}
			}
			set_autonomy = {
				target = country_to_initiate
				autonomy_state = wfc_autonomy_province
			}
			every_controlled_state = {
				limit = {
					is_core_of = country_to_initiate
					NOT = {
						is_core_of = ROOT
					}
				}
				var:country_to_initiate = {
					transfer_state = PREV
				}
			}
			# release_autonomy = {
			# 	target = country_to_initiate
			# 	autonomy_state = wfc_autonomy_province
			# 	freedom_level = 0.5
			# 	release_non_owned_controlled = yes
			# }
			var:country_to_initiate = {
				set_country_flag = wfc_change_focus_tree_flag
				load_focus_tree = {
					tree = wfc_puppet_focus
					#tree = generic_focus
					keep_completed = no
				}
				#add_ideas = wfc_economic_assistance
				every_owned_state = {
					remove_claim_by = ROOT
				}
			}
			if = {
				limit = {
					var:country_to_initiate = {
						NOT = {
							original_tag = ACW
							original_tag = HEN
							original_tag = MAH
							original_tag = TRP
							original_tag = MMS
							original_tag = MEH
						}
					}
				}
				var:country_to_initiate = {
					wfc_change_country_leader = yes
				}
			}
		}
		else = {
			# Если есть
			create_dynamic_country = {
				original_tag = country_to_initiate
				set_temp_variable = {
					new_country = this
				}
				PREV = {
					if = {
						limit = {
							original_tag = ACW
						}
						var:new_country = {
							set_country_flag = acw_federation_subject_flag
						}
					}
					else_if = {
						limit = {
							original_tag = HEN
						}
						var:new_country = {
							set_country_flag = hen_federation_subject_flag
						}
					}
					else_if = {
						limit = {
							original_tag = MAH
						}
						var:new_country = {
							set_country_flag = mah_federation_subject_flag
						}
					}
					else_if = {
						limit = {
							original_tag = MEH
						}
						var:new_country = {
							set_country_flag = meh_federation_subject_flag
						}
					}
					else_if = {
						limit = {
							original_tag = MMS
						}
						var:new_country = {
							set_country_flag = mms_federation_subject_flag
						}
					}
					else = {
						var:new_country = {
							set_country_flag = trp_federation_subject_flag
						}
					}
					set_autonomy = {
						target = new_country
						autonomy_state = wfc_autonomy_province
					}
					every_controlled_state = {
						limit = {
							is_core_of = country_to_initiate
							NOT = {
								is_core_of = ROOT
							}
						}
						#remove_claim_by = ROOT
						var:new_country = {
							transfer_state = PREV
						}
					}
					# puppet = new_country
					# set_autonomy = {
					# 	target = new_country
					# 	autonomy_state = wfc_autonomy_province
					# 	freedom_level = 0.5
					# }
				}
				set_country_flag = wfc_change_focus_tree_flag
				load_focus_tree = {
					tree = wfc_puppet_focus
					#tree = generic_focus
					keep_completed = no
				}
				#add_ideas = wfc_economic_assistance
				every_owned_state = {
					remove_claim_by = ROOT
				}
				if = {
					limit = {
						var:country_to_initiate = {
							NOT = {
								original_tag = ACW
								original_tag = HEN
								original_tag = MAH
								original_tag = TRP
								original_tag = MMS
								original_tag = MEH
							}
						}
					}
					wfc_change_country_leader = yes
				}
			}
		}
	}
}

wfc_change_country_leader = {
	custom_effect_tooltip = wfc_governor_general_will_be_appointed_tt
	hidden_effect = {
		if = {
			limit = {
				ROOT = {
					original_tag = ACW
				}
			}
			acw_change_country_leader = yes
		}
		else_if = {
			limit = {
				ROOT = {
					original_tag = HEN
				}
			}
			hen_change_country_leader = yes
		}
		else_if = {
			limit = {
				ROOT = {
					original_tag = MEH
				}
			}
			meh_change_country_leader = yes
		}
		else_if = {
			limit = {
				ROOT = {
					original_tag = MAH
				}
			}
			mah_change_country_leader = yes
		}
		else_if = {
			limit = {
				ROOT = {
					original_tag = MMS
				}
			}
			mms_change_country_leader = yes
		}
		else = {
			trp_change_country_leader = yes
		}
	}
}

wfc_instantiate_province2 = {
	custom_effect_tooltip = wfc_instantiate_province_tt
	hidden_effect = {
		if = {
			limit = {
				var:country_to_initiate = {
					exists = yes
				}
			}
			create_dynamic_country = {
				original_tag = country_to_initiate
				set_temp_variable = {
					country_to_initiate = this
				}
			}
		}
		if = {
			limit = {
				original_tag = ACW
			}
			var:country_to_initiate = {
				set_country_flag = acw_federation_subject_flag
			}
		}
		else_if = {
			limit = {
				original_tag = HEN
			}
			var:country_to_initiate = {
				set_country_flag = hen_federation_subject_flag
			}
		}
		else_if = {
			limit = {
				original_tag = MAH
			}
			var:country_to_initiate = {
				set_country_flag = mah_federation_subject_flag
			}
		}
		else_if = {
			limit = {
				original_tag = MEH
			}
			var:country_to_initiate = {
				set_country_flag = meh_federation_subject_flag
			}
		}
		else_if = {
			limit = {
				original_tag = MMS
			}
			var:country_to_initiate = {
				set_country_flag = mms_federation_subject_flag
			}
		}
		else = {
			var:country_to_initiate = {
				set_country_flag = trp_federation_subject_flag
			}
		}
		set_autonomy = {
			target = country_to_initiate
			autonomy_state = wfc_autonomy_province
		}
		every_controlled_state = {
			limit = {
				is_core_of = country_to_initiate
				NOT = {
					is_core_of = ROOT
				}
			}
			var:country_to_initiate = {
				transfer_state = PREV
			}
		}
		var:country_to_initiate = {
			set_country_flag = wfc_change_focus_tree_flag
			load_focus_tree = {
				tree = wfc_puppet_focus
				keep_completed = no
			}
			every_owned_state = {
				remove_claim_by = ROOT
			}
		}
	}
}
