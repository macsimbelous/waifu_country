mms_workouts_shamiko_category = {
	mms_train_shamiko_attack = {
		available = {
			custom_trigger_tooltip = {
				tooltip = mms_workouts_shamiko_not_final_tt
				check_variable = {
					var = mms_shamiko_workouts_count
					value = 10
					compare = less_than
				}
			}
			custom_trigger_tooltip = {
				tooltip = mms_train_shamiko_run_tt
				NOT = {
					has_country_flag = mms_train_shamiko_run
				}
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				neutrality > 0.3
				add = 2
			}
		}
		cost = 25
		days_remove = 15
		remove_effect = {
			add_to_variable = {
				mms_shamiko_attack = 1
			}
			add_to_variable = {
				mms_shamiko_workouts_count = 1
			}
			clr_country_flag = mms_train_shamiko_run
		}
		complete_effect = {
			set_country_flag = mms_train_shamiko_run
		}
	}
	mms_train_shamiko_protection = {
		available = {
			custom_trigger_tooltip = {
				tooltip = mms_workouts_shamiko_not_final_tt
				check_variable = {
					var = mms_shamiko_workouts_count
					value = 10
					compare = less_than
				}
			}
			custom_trigger_tooltip = {
				tooltip = mms_train_shamiko_run_tt
				NOT = {
					has_country_flag = mms_train_shamiko_run
				}
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				neutrality > 0.3
				add = 2
			}
		}
		cost = 25
		days_remove = 15
		remove_effect = {
			add_to_variable = {
				mms_shamiko_defence = 1
			}
			add_to_variable = {
				mms_shamiko_workouts_count = 1
			}
			clr_country_flag = mms_train_shamiko_run
		}
		complete_effect = {
			set_country_flag = mms_train_shamiko_run
		}
	}
	mms_train_shamiko_speed = {
		available = {
			#neutrality  > 0.3
			custom_trigger_tooltip = {
				tooltip = mms_workouts_shamiko_not_final_tt
				check_variable = {
					var = mms_shamiko_workouts_count
					value = 10
					compare = less_than
				}
			}
			custom_trigger_tooltip = {
				tooltip = mms_train_shamiko_run_tt
				NOT = {
					has_country_flag = mms_train_shamiko_run
				}
			}
		}
		ai_will_do = {
			base = 0
			modifier = {
				neutrality > 0.3
				add = 2
			}
		}
		cost = 25
		days_remove = 15
		remove_effect = {
			add_to_variable = {
				mms_shamiko_speed = 1
			}
			add_to_variable = {
				mms_shamiko_workouts_count = 1
			}
			clr_country_flag = mms_train_shamiko_run
		}
		complete_effect = {
			set_country_flag = mms_train_shamiko_run
		}
	}
	mms_workouts_shamiko_final = {
		available = {
			custom_trigger_tooltip = {
				tooltip = mms_workouts_shamiko_final_tt
				check_variable = {
					var = mms_shamiko_workouts_count
					value = 10
					compare = greater_than_or_equals
				}
			}
		}
		ai_will_do = {
			factor = 2
		}
		cost = 50
		fire_only_once = yes
		complete_effect = {
			remove_country_leader_trait = defeatist
			remove_country_leader_trait = wfc_defender
			#add_country_leader_trait = wfc_empress
			#add_country_leader_trait = warmonger
			add_country_leader_trait = wfc_Tyan_militarist
			divide_variable = {
				mms_shamiko_attack = 100
			}
			divide_variable = {
				mms_shamiko_defence = 100
			}
			divide_variable = {
				mms_shamiko_speed = 100
			}
			add_dynamic_modifier = {
				modifier = mms_power_shamiko
			}
		}
	}
}

mms_civil_war_category = {
	mms_fascist_rise_decision = {
		is_good = no
		selectable_mission = no
		days_mission_timeout = 180
		available = {
			fascism < 0.1
			has_stability > 0.6
		}
		activation = {
			has_government = communism
			NOT = {
				has_country_flag = mms_civil_war_started_flag
			}
		}
		timeout_effect = {
			set_country_flag = mms_civil_war_started_flag
			set_variable = {
				var = civil_war_size_var
				value = party_popularity@fascism
			}
			if = {
				limit = {
					check_variable = {
						var = civil_war_size_var
						value = 0.3
						compare = less_than
					}
				}
				set_variable = {
					var = civil_war_size_var
					value = 0.3
				}
			}
			start_civil_war = {
				#ruling_party = fascism
				ideology = fascism
				size = civil_war_size_var
			}
		}
		complete_effect = {
			set_country_flag = mms_civil_war_started_flag
			add_political_power = 150
		}
	}
	mms_democratic_rise_decision = {
		is_good = no
		selectable_mission = no
		days_mission_timeout = 180
		available = {
			democratic < 0.1
			has_stability > 0.6
		}
		activation = {
			has_government = fascism
			NOT = {
				has_country_flag = mms_civil_war_started_flag
			}
		}
		timeout_effect = {
			set_country_flag = mms_civil_war_started_flag
			set_variable = {
				var = civil_war_size_var
				value = party_popularity@democratic
			}
			if = {
				limit = {
					check_variable = {
						var = civil_war_size_var
						value = 0.3
						compare = less_than
					}
				}
				set_variable = {
					var = civil_war_size_var
					value = 0.3
				}
			}
			start_civil_war = {
				#ruling_party = fascism
				ideology = democratic
				size = civil_war_size_var
			}
		}
		complete_effect = {
			set_country_flag = mms_civil_war_started_flag
			add_political_power = 150
		}
	}
	mms_communism_rise_decision = {
		is_good = no
		selectable_mission = no
		days_mission_timeout = 180
		available = {
			communism < 0.1
			has_stability > 0.6
		}
		activation = {
			has_government = democratic
			NOT = {
				has_country_flag = mms_civil_war_started_flag
			}
		}
		timeout_effect = {
			set_country_flag = mms_civil_war_started_flag
			set_variable = {
				var = civil_war_size_var
				value = party_popularity@communism
			}
			if = {
				limit = {
					check_variable = {
						var = civil_war_size_var
						value = 0.3
						compare = less_than
					}
				}
				set_variable = {
					var = civil_war_size_var
					value = 0.3
				}
			}
			start_civil_war = {
				#ruling_party = fascism
				ideology = communism
				size = civil_war_size_var
			}
		}
		complete_effect = {
			set_country_flag = mms_civil_war_started_flag
			add_political_power = 150
		}
	}
}

mms_expansion_of_living_space_category = {
	mms_add_claims_to_per_and_afg = {
		cost = 50
		fire_only_once = yes
		complete_effect = {
			PER = {
				every_owned_state = {
					limit = {
						is_core_of = PER
					}
					add_claim_by = MMS
				}
			}
			AFG = {
				every_owned_state = {
					limit = {
						is_core_of = AFG
					}
					add_claim_by = MMS
				}
			}
		}
		ai_will_do = {
			factor = 5
		}
	}
	mms_attack_per = {
		icon = generic_ignite_civil_war
		cost = 25
		days_remove = 60
		fire_only_once = yes
		war_with_on_remove = PER
		visible = {
			country_exists = PER
			PER = {
				NOT = {
					OR = {
						is_puppet_of = MMS
						is_subject_of = MMS
					}
				}
			}
		}
		available = {
			PER = {
				any_owned_state = {
					is_claimed_by = MMS
				}
			}
			NOT = {
				has_war_with = AFG
				is_in_faction_with = PER
				has_country_flag = mms_prepare_war_flag
			}
		}
		ai_will_do = {
			factor = 5
		}
		modifier = {
			industrial_capacity_factory = 0.2
			industrial_capacity_dockyard = 0.2
			training_time_army_factor = -0.2
			production_speed_buildings_factor = 0.2
		}
		complete_effect = {
			set_country_flag = mms_prepare_war_flag
		}
		remove_effect = {
			clr_country_flag = mms_prepare_war_flag
			declare_war_on = {
				target = PER
				type = annex_everything
			}
		}
	}
	mms_attack_afg = {
		icon = generic_ignite_civil_war
		cost = 25
		days_remove = 60
		fire_only_once = yes
		war_with_on_remove = AFG
		visible = {
			country_exists = AFG
			AFG = {
				NOT = {
					OR = {
						is_puppet_of = MMS
						is_subject_of = MMS
					}
				}
			}
		}
		available = {
			AFG = {
				any_owned_state = {
					is_claimed_by = MMS
				}
			}
			NOT = {
				has_war_with = PER
				is_in_faction_with = AFG
				has_country_flag = mms_prepare_war_flag
			}
		}
		ai_will_do = {
			factor = 5
		}
		modifier = {
			industrial_capacity_factory = 0.2
			industrial_capacity_dockyard = 0.2
			training_time_army_factor = -0.2
			production_speed_buildings_factor = 0.2
		}
		complete_effect = {
			set_country_flag = mms_prepare_war_flag
		}
		remove_effect = {
			clr_country_flag = mms_prepare_war_flag
			declare_war_on = {
				target = AFG
				type = annex_everything
			}
		}
	}
	mms_colonization_per_and_afg = {
		cost = 50
		days_remove = 180
		fire_only_once = yes
		available = {
			if = {
				limit = {
					is_ai = yes
				}
				# Iran
				custom_trigger_tooltip = {
					tooltip = form_country_iran_required_states_tt
					419 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					421 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					420 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					417 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					413 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					266 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					418 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					411 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					412 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					416 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					414 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					410 = { wfc_is_controlled_by_root_or_federation_subject = yes }
				}
				# Afghanistan
				custom_trigger_tooltip = {
					tooltip = form_country_afghanistan_required_states_tt
					415 = { wfc_is_controlled_by_root_or_federation_subject = yes }
					267 = { wfc_is_controlled_by_root_or_federation_subject = yes }
				}
			}
			else = {
				# Iran
				custom_trigger_tooltip = {
					tooltip = form_country_iran_required_states_tt
					controls_state = 419
					controls_state = 421
					controls_state = 420
					controls_state = 417
					controls_state = 413
					controls_state = 266
					controls_state = 418
					controls_state = 411
					controls_state = 412
					controls_state = 416
					controls_state = 414
					controls_state = 410
				}
				# Afghanistan
				custom_trigger_tooltip = {
					tooltip = form_country_afghanistan_required_states_tt
					controls_state = 415
					controls_state = 267
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
		remove_effect = {
			hidden_effect = {
				annex_country = {
					target = PER
				}
				annex_country = {
					target = AFG
				}
				transfer_state = 419
				transfer_state = 421
				transfer_state = 420
				transfer_state = 417
				transfer_state = 413
				transfer_state = 266
				transfer_state = 418
				transfer_state = 411
				transfer_state = 412
				transfer_state = 416
				transfer_state = 414
				transfer_state = 410
				transfer_state = 415
				transfer_state = 267 
			}
			412 = {
				add_manpower = -1000000
			}
			every_owned_state = {
				limit = {
					OR = {
						is_core_of = PER
						is_core_of = AFG
					}
				}
				add_manpower = 91000
				add_core_of = MMS
			}
		}
	}
}

economy_decisions = {
	mms_expansion_of_the_supply_network = {
		icon = generic_construction
		fire_only_once = yes
		cost = 50
		days_remove = 120
		allowed = {
			original_tag = MMS
		}
		available = {
			num_of_civilian_factories_available_for_projects > 4
			# Iran
			custom_trigger_tooltip = {
				tooltip = form_country_iran_required_states_tt
				controls_state = 419
				controls_state = 421
				controls_state = 420
				controls_state = 417
				controls_state = 413
				controls_state = 266
				controls_state = 418
				controls_state = 411
				controls_state = 412
				controls_state = 416
				controls_state = 414
				controls_state = 410
			}
			# Afghanistan
			custom_trigger_tooltip = {
				tooltip = form_country_afghanistan_required_states_tt
				controls_state = 415
				controls_state = 267
			}
		}
		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			build_railway = {
				level = 1
				start_province = 7982
				target_province = 7990
			}
			build_railway = {
				level = 2
				start_province = 7990
				target_province = 10737
			}
			build_railway = {
				level = 2
				start_province = 7982
				target_province = 4755
			}
			build_railway = {
				level = 2
				start_province = 7990
				target_province = 7602
			}
			build_railway = {
				level = 2
				start_province = 2065
				target_province = 5098
			}
			421 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 5098
					instant_build = yes
				}
			}
			419 = {
				add_building_construction = {
					type = supply_node
					level = 1
					province = 4755
					instant_build = yes
				}
			}
		}
		ai_will_do = {
			factor = 10
		}
	}
}

political_actions = {
	mms_retire_holo = {
		allowed = {
			original_tag = MMS
		}
		visible = {
			has_government = democratic
		}
		available = {
			has_country_leader = {
				character = MMS_holo
				ruling_only = yes
			}
			democratic > 0.8
			has_stability > 0.8
		}
		ai_will_do = {
			factor = -100
		}
		cost = 100
		fire_only_once = yes
		complete_effect = {
			remove_country_leader_role = {
				character = MMS_holo
				ideology = liberalism
			}
			add_country_leader_role = {
				character = MMS_belldandy
				promote_leader = yes
				country_leader = {
					ideology = liberalism
					expire = "1965.1.1.1"
					traits = {
						wfc_monster
						wfc_peoples_favorite
						wfc_patron_of_science
						wfc_defender
					}
				}
			}
		}
	}
	mms_retire_maou = {
		allowed = {
			original_tag = MMS
		}
		visible = {
			has_government = communism
		}
		available = {
			has_country_leader = {
				character = MMS_maou
				ruling_only = yes
			}
			communism > 0.8
			has_stability > 0.8
		}
		ai_will_do = {
			factor = -100
		}
		cost = 100
		fire_only_once = yes
		complete_effect = {
			remove_country_leader_role = {
				character = MMS_maou
				ideology = leninism
			}
			add_country_leader_role = {
				character = MMS_drippler
				promote_leader = yes
				country_leader = {
					ideology = stalinism
					expire = "1965.1.1.1"
					traits = {
						wfc_monster
						wfc_revolutionary
						wfc_patron_of_the_military_industrial_complex
						wfc_demon_lord
					}
				}
			}
		}
	}
	mms_retire_yuuko_yoshida = {
		allowed = {
			original_tag = MMS
		}
		visible = {
			has_government = neutrality
		}
		available = {
			has_country_leader = {
				character = MMS_yuuko_yoshida
				ruling_only = yes
			}
			neutrality > 0.8
			has_stability > 0.8
		}
		ai_will_do = {
			factor = -100
		}
		cost = 100
		fire_only_once = yes
		complete_effect = {
			remove_country_leader_role = {
				character = MMS_yuuko_yoshida
				ideology = despotism
			}
			add_country_leader_role = {
				character = MMS_suu
				promote_leader = yes
				country_leader = {
					ideology = despotism
					expire = "1965.1.1.1"
					traits = {
						wfc_monster
						wfc_Tyan_militarist
						wfc_patron_of_intelligence
						wfc_demon_lord
					}
				}
			}
		}
	}
	mms_retire_leader = {
		name = wfc_retire_leader
		allowed = {
			original_tag = MMS
		}
		available = {
			if = {
				limit = {
					has_government = democratic
				}
				democratic > 0.8
			}
			else_if = {
				limit = {
					has_government = communism
				}
				communism > 0.8
			}
			else_if = {
				limit = {
					has_government = fascism
				}
				fascism > 0.8
			}
			else = {
				neutrality > 0.8
			}
			has_stability > 0.8
		}
		ai_will_do = {
			factor = -100
		}
		cost = 100
		fire_only_once = no
		complete_effect = {
			retire_country_leader = yes
			custom_effect_tooltip = wfc_retire_leader_tt
			hidden_effect = {
				if = {
					limit = {
						has_government = democratic
					}
					random_character = {
						limit = {
							NOT = {
								has_character_flag = mms_country_leader_flag
							}
						}
						set_character_flag = mms_country_leader_flag
						ROOT = {
							add_country_leader_role = {
								character = PREV
								promote_leader = yes
								country_leader = {
									ideology = liberalism
									expire = "1965.1.1.1"
									traits = {
										wfc_monster
									}
								}
							}
						}
					}
				}
				else_if = {
					limit = {
						has_government = communism
					}
					random_character = {
						limit = {
							NOT = {
								has_character_flag = mms_country_leader_flag
							}
						}
						set_character_flag = mms_country_leader_flag
						ROOT = {
							add_country_leader_role = {
								character = PREV
								promote_leader = yes
								country_leader = {
									ideology = stalinism
									expire = "1965.1.1.1"
									traits = {
										wfc_monster
									}
								}
							}
						}
					}
				}
				else_if = {
					limit = {
						has_government = fascism
					}
					random_character = {
						limit = {
							NOT = {
								has_character_flag = mms_country_leader_flag
							}
						}
						set_character_flag = mms_country_leader_flag
						ROOT = {
							add_country_leader_role = {
								character = PREV
								promote_leader = yes
								country_leader = {
									ideology = fascism_ideology
									expire = "1965.1.1.1"
									traits = {
										wfc_monster
									}
								}
							}
						}
					}
				}
				else = {
					random_character = {
						limit = {
							NOT = {
								has_character_flag = mms_country_leader_flag
							}
						}
						set_character_flag = mms_country_leader_flag
						ROOT = {
							add_country_leader_role = {
								character = PREV
								promote_leader = yes
								country_leader = {
									ideology = despotism
									expire = "1965.1.1.1"
									traits = {
										wfc_monster
									}
								}
							}
						}
					}
				}
				random_list = {
					1 = {
						add_country_leader_trait = wfc_revolutionary
					}
					1 = {
						add_country_leader_trait = wfc_peoples_favorite
					}
					1 = {
						add_country_leader_trait = wfc_tyan_militarist
					}
					1 = {
						add_country_leader_trait = wfc_defender
					}
				}
				random_list = {
					1 = {
						add_country_leader_trait = wfc_patron_of_intelligence
					}
					1 = {
						add_country_leader_trait = wfc_patron_of_the_military_industrial_complex
					}
					1 = {
						add_country_leader_trait = wfc_patron_of_industry
					}
					1 = {
						add_country_leader_trait = wfc_patron_of_science
					}
				}
				random_list = {
					1 = {
						add_country_leader_trait = wfc_idol
					}
					1 = {
						add_country_leader_trait = wfc_dictator
					}
					1 = {
						add_country_leader_trait = wfc_tsundere
					}
					1 = {
						add_country_leader_trait = wfc_empress
					}
					1 = {
						add_country_leader_trait = wfc_demon_lord
					}
				}
			}
		}
	}
}
